{"version":3,"file":"discrete-wavelets.umd.js","sources":["../src/padding/symmetric/symmetric.ts","../src/padding/antisymmetric/antisymmetric.ts","../src/padding/constant/constant.ts","../src/padding/periodic/periodic.ts","../src/padding/reflect/reflect.ts","../src/padding/smooth/smooth.ts","../src/padding/zero/zero.ts","../src/padding/one/one.ts","../src/padding/padding.ts","../src/wavelets/daubechies/daubechies.ts","../src/wavelets/wavelets.ts","../src/helpers.ts","../src/wt.ts"],"sourcesContent":["import { PaddingMode } from '../padding';\n\n/**\n * Symmetric padding.\n */\nexport const SYMMETRIC_PADDING: PaddingMode = 'symmetric';\n\n/**\n * Returns a single value of symmetric padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function symmetricPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error(\n      'Cannot determine symmetric padding for data of zero length.'\n    );\n  }\n\n  /* Determine symmetric padding. */\n  const dirChanges: number = Math.floor(index / data.length);\n  const inversions: number = (inverse) ? dirChanges : dirChanges + 1;\n  return (inversions % 2 === 0)\n    ? data[index % data.length]\n    : data[data.length - 1 - (index % data.length)];\n};\n","import { PaddingMode } from '../padding';\nimport { symmetricPadding } from '../symmetric/symmetric';\n\n/**\n * Antisymmetric padding.\n */\nexport const ANTISYMMETRIC_PADDING: PaddingMode = 'antisymmetric';\n\n/**\n * Returns a single value of antisymmetric padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function antisymmetricPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  const dirChanges: number = Math.floor(index / data.length);\n  const sign: number = (dirChanges % 2 === 0) ? -1 : 1;\n  return sign * symmetricPadding(data, index, inverse);\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Constant padding.\n */\nexport const CONSTANT_PADDING: PaddingMode = 'constant';\n\n/**\n * Returns a single value of constant padding.\n * \n * @param  data    Input values.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function constantPadding(\n  data: ReadonlyArray<number>,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error(\n      'Cannot determine constant padding for data of zero length.'\n    );\n  }\n\n  /* Determine constant padding. */\n  return (!inverse)\n    ? data[data.length - 1]\n    : data[0];\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Periodic padding.\n */\nexport const PERIODIC_PADDING: PaddingMode = 'periodic';\n\n/**\n * Returns a single value of periodic padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function periodicPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error(\n      'Cannot determine periodic padding for data of zero length.'\n    );\n  }\n\n  /* Determine periodic padding. */\n  return (!inverse)\n    ? data[index % data.length]\n    : data[data.length - 1 - (index % data.length)];\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Reflect padding.\n */\nexport const REFLECT_PADDING: PaddingMode = 'reflect';\n\n/**\n * Returns a single value of reflect padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function reflectPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error(\n      'Cannot determine reflect padding for data of zero length.'\n    );\n  }\n\n  /* Return constant value for data of length one. */\n  if (data.length === 1) return data[0];\n\n  /* Determine reflect padding. */\n  const dirChanges: number = Math.floor(index / (data.length - 1));\n  const inversions: number = (inverse) ? dirChanges : dirChanges + 1;\n  return (inversions % 2 === 0)\n    ? data[index % (data.length - 1) + 1]\n    : data[data.length - 2 - (index % (data.length - 1))];\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Smooth padding.\n */\nexport const SMOOTH_PADDING: PaddingMode = 'smooth';\n\n/**\n * Returns a single value of smooth padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function smoothPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error('Cannot determine smooth padding for data of zero length.');\n  }\n\n  /* Determine line equation. */\n  const end: number = data.length - 1;\n  const offset: number = (inverse) ? data[0] : data[end];\n  const slope: number = (inverse)\n    ? (data.length === 1) ? data[0] : data[0] - data[1]\n    : (data.length === 1) ? -data[0] : data[end] - data[end - 1];\n  return offset + (index + 1) * slope;\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Zero padding.\n */\nexport const ZERO_PADDING: PaddingMode = 'zero';\n\n/**\n * Returns a single value of zero padding.\n * \n * @return         Single padding value.\n */\nexport function zeroPadding(): number {\n  return 0;\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Zero padding.\n */\nexport const ONE_PADDING: PaddingMode = 'one';\n\n/**\n * Returns a single value of one padding.\n * \n * @return         Single padding value.\n */\nexport function onePadding(): number {\n  return 1;\n};\n","export { antisymmetricPadding } from './antisymmetric/antisymmetric';\nexport { constantPadding } from './constant/constant';\nexport { periodicPadding } from './periodic/periodic';\nexport { reflectPadding } from './reflect/reflect';\nexport { smoothPadding } from './smooth/smooth';\nexport { symmetricPadding } from './symmetric/symmetric';\nexport { zeroPadding } from './zero/zero';\nexport { onePadding } from './one/one';\n\nimport { ANTISYMMETRIC_PADDING } from './antisymmetric/antisymmetric';\nimport { CONSTANT_PADDING } from './constant/constant';\nimport { PERIODIC_PADDING } from './periodic/periodic';\nimport { REFLECT_PADDING } from './reflect/reflect';\nimport { SMOOTH_PADDING } from './smooth/smooth';\nimport { SYMMETRIC_PADDING } from './symmetric/symmetric';\nimport { ZERO_PADDING } from './zero/zero';\nimport { ONE_PADDING } from './one/one';\n\n/**\n * Signal extension mode.\n */\nexport type PaddingMode =\n    'antisymmetric'\n    | 'constant'\n    | 'periodic'\n    | 'reflect'\n    | 'smooth'\n    | 'symmetric'\n    | 'zero'\n    | 'one';\n\n/**\n * Interface of supported padding mode.\n */\nexport interface PaddingModes {\n  antisymmetric: PaddingMode;\n  constant: PaddingMode;\n  modes: PaddingMode[];\n  periodic: PaddingMode;\n  reflect: PaddingMode;\n  smooth: PaddingMode;\n  symmetric: PaddingMode;\n  zero: PaddingMode;\n  one: PaddingMode;\n}\n\n/**\n * Supported signal extension modes.\n */\nexport const PADDING_MODES: Readonly<PaddingModes> = {\n  antisymmetric: ANTISYMMETRIC_PADDING,\n  constant: CONSTANT_PADDING,\n  periodic: PERIODIC_PADDING,\n  reflect: REFLECT_PADDING,\n  smooth: SMOOTH_PADDING,\n  symmetric: SYMMETRIC_PADDING,\n  zero: ZERO_PADDING,\n  one: ONE_PADDING,\n  modes: [\n    ONE_PADDING,\n    ZERO_PADDING,\n    CONSTANT_PADDING,\n    SYMMETRIC_PADDING,\n    PERIODIC_PADDING,\n    SMOOTH_PADDING,\n    REFLECT_PADDING,\n    ANTISYMMETRIC_PADDING,\n  ],\n};\n\n/**\n * Number of padded values at front and back.\n */\nexport type PaddingWidths = [number, number];\n","// SOURCE: https://github.com/PyWavelets/pywt/blob/master/pywt/_extensions/c/wavelets_coeffs.template.h\n\n/**\n * Haar wavelet scaling numbers.\n */\nexport const HaarWavelet: ReadonlyArray<number> = [\n  1 / Math.SQRT2,\n  1 / Math.SQRT2\n];\n\n/**\n * Daubechies 2 scaling numbers.\n */\nexport const Db2Wavelet: ReadonlyArray<number> = [\n  (1 + Math.sqrt(3)) / (4 * Math.SQRT2),\n  (3 + Math.sqrt(3)) / (4 * Math.SQRT2),\n  (3 - Math.sqrt(3)) / (4 * Math.SQRT2),\n  (1 - Math.sqrt(3)) / (4 * Math.SQRT2)\n];\n\n/**\n * Daubechies 3 scaling numbers.\n */\nexport const Db3Wavelet: ReadonlyArray<number> = [\n  3.326705529500826159985115891390056300129233992450683597084705e-01,\n  8.068915093110925764944936040887134905192973949948236181650920e-01,\n  4.598775021184915700951519421476167208081101774314923066433867e-01,\n  -1.350110200102545886963899066993744805622198452237811919756862e-01,\n  -8.544127388202666169281916918177331153619763898808662976351748e-02,\n  3.522629188570953660274066471551002932775838791743161039893406e-02\n];\n\n/**\n * Daubechies 4 scaling numbers.\n */\nexport const Db4Wavelet: ReadonlyArray<number> = [\n  2.303778133088965008632911830440708500016152482483092977910968e-01,\n  7.148465705529156470899219552739926037076084010993081758450110e-01,\n  6.308807679298589078817163383006152202032229226771951174057473e-01,\n  -2.798376941685985421141374718007538541198732022449175284003358e-02,\n  -1.870348117190930840795706727890814195845441743745800912057770e-01,\n  3.084138183556076362721936253495905017031482172003403341821219e-02,\n  3.288301166688519973540751354924438866454194113754971259727278e-02,\n  -1.059740178506903210488320852402722918109996490637641983484974e-02\n];\n\n/**\n * Daubechies 5 scaling numbers.\n */\nexport const Db5Wavelet: ReadonlyArray<number> = [\n  1.601023979741929144807237480204207336505441246250578327725699e-01,\n  6.038292697971896705401193065250621075074221631016986987969283e-01,\n  7.243085284377729277280712441022186407687562182320073725767335e-01,\n  1.384281459013207315053971463390246973141057911739561022694652e-01,\n  -2.422948870663820318625713794746163619914908080626185983913726e-01,\n  -3.224486958463837464847975506213492831356498416379847225434268e-02,\n  7.757149384004571352313048938860181980623099452012527983210146e-02,\n  -6.241490212798274274190519112920192970763557165687607323417435e-03,\n  -1.258075199908199946850973993177579294920459162609785020169232e-02,\n  3.335725285473771277998183415817355747636524742305315099706428e-03\n];\n\n/**\n * Daubechies 6 scaling numbers.\n */\nexport const Db6Wavelet: ReadonlyArray<number> = [\n  1.115407433501094636213239172409234390425395919844216759082360e-01,\n  4.946238903984530856772041768778555886377863828962743623531834e-01,\n  7.511339080210953506789344984397316855802547833382612009730420e-01,\n  3.152503517091976290859896548109263966495199235172945244404163e-01,\n  -2.262646939654398200763145006609034656705401539728969940143487e-01,\n  -1.297668675672619355622896058765854608452337492235814701599310e-01,\n  9.750160558732304910234355253812534233983074749525514279893193e-02,\n  2.752286553030572862554083950419321365738758783043454321494202e-02,\n  -3.158203931748602956507908069984866905747953237314842337511464e-02,\n  5.538422011614961392519183980465012206110262773864964295476524e-04,\n  4.777257510945510639635975246820707050230501216581434297593254e-03,\n  -1.077301085308479564852621609587200035235233609334419689818580e-03\n];\n\n/**\n * Daubechies 7 scaling numbers.\n */\nexport const Db7Wavelet: ReadonlyArray<number> = [\n  7.785205408500917901996352195789374837918305292795568438702937e-02,\n  3.965393194819173065390003909368428563587151149333287401110499e-01,\n  7.291320908462351199169430703392820517179660611901363782697715e-01,\n  4.697822874051931224715911609744517386817913056787359532392529e-01,\n  -1.439060039285649754050683622130460017952735705499084834401753e-01,\n  -2.240361849938749826381404202332509644757830896773246552665095e-01,\n  7.130921926683026475087657050112904822711327451412314659575113e-02,\n  8.061260915108307191292248035938190585823820965629489058139218e-02,\n  -3.802993693501441357959206160185803585446196938467869898283122e-02,\n  -1.657454163066688065410767489170265479204504394820713705239272e-02,\n  1.255099855609984061298988603418777957289474046048710038411818e-02,\n  4.295779729213665211321291228197322228235350396942409742946366e-04,\n  -1.801640704047490915268262912739550962585651469641090625323864e-03,\n  3.537137999745202484462958363064254310959060059520040012524275e-04\n];\n\n/**\n * Daubechies 8 scaling numbers.\n */\nexport const Db8Wavelet: ReadonlyArray<number> = [\n  5.441584224310400995500940520299935503599554294733050397729280e-02,\n  3.128715909142999706591623755057177219497319740370229185698712e-01,\n  6.756307362972898068078007670471831499869115906336364227766759e-01,\n  5.853546836542067127712655200450981944303266678053369055707175e-01,\n  -1.582910525634930566738054787646630415774471154502826559735335e-02,\n  -2.840155429615469265162031323741647324684350124871451793599204e-01,\n  4.724845739132827703605900098258949861948011288770074644084096e-04,\n  1.287474266204784588570292875097083843022601575556488795577000e-01,\n  -1.736930100180754616961614886809598311413086529488394316977315e-02,\n  -4.408825393079475150676372323896350189751839190110996472750391e-02,\n  1.398102791739828164872293057263345144239559532934347169146368e-02,\n  8.746094047405776716382743246475640180402147081140676742686747e-03,\n  -4.870352993451574310422181557109824016634978512157003764736208e-03,\n  -3.917403733769470462980803573237762675229350073890493724492694e-04,\n  6.754494064505693663695475738792991218489630013558432103617077e-04,\n  -1.174767841247695337306282316988909444086693950311503927620013e-04\n];\n\n/**\n * Daubechies 9 scaling numbers.\n */\nexport const Db9Wavelet: ReadonlyArray<number> = [\n  3.807794736387834658869765887955118448771714496278417476647192e-02,\n  2.438346746125903537320415816492844155263611085609231361429088e-01,\n  6.048231236901111119030768674342361708959562711896117565333713e-01,\n  6.572880780513005380782126390451732140305858669245918854436034e-01,\n  1.331973858250075761909549458997955536921780768433661136154346e-01,\n  -2.932737832791749088064031952421987310438961628589906825725112e-01,\n  -9.684078322297646051350813353769660224825458104599099679471267e-02,\n  1.485407493381063801350727175060423024791258577280603060771649e-01,\n  3.072568147933337921231740072037882714105805024670744781503060e-02,\n  -6.763282906132997367564227482971901592578790871353739900748331e-02,\n  2.509471148314519575871897499885543315176271993709633321834164e-04,\n  2.236166212367909720537378270269095241855646688308853754721816e-02,\n  -4.723204757751397277925707848242465405729514912627938018758526e-03,\n  -4.281503682463429834496795002314531876481181811463288374860455e-03,\n  1.847646883056226476619129491125677051121081359600318160732515e-03,\n  2.303857635231959672052163928245421692940662052463711972260006e-04,\n  -2.519631889427101369749886842878606607282181543478028214134265e-04,\n  3.934732031627159948068988306589150707782477055517013507359938e-05\n];\n\n/**\n * Daubechies 10 scaling numbers.\n */\nexport const Db10Wavelet: ReadonlyArray<number> = [\n  2.667005790055555358661744877130858277192498290851289932779975e-02,\n  1.881768000776914890208929736790939942702546758640393484348595e-01,\n  5.272011889317255864817448279595081924981402680840223445318549e-01,\n  6.884590394536035657418717825492358539771364042407339537279681e-01,\n  2.811723436605774607487269984455892876243888859026150413831543e-01,\n  -2.498464243273153794161018979207791000564669737132073715013121e-01,\n  -1.959462743773770435042992543190981318766776476382778474396781e-01,\n  1.273693403357932600826772332014009770786177480422245995563097e-01,\n  9.305736460357235116035228983545273226942917998946925868063974e-02,\n  -7.139414716639708714533609307605064767292611983702150917523756e-02,\n  -2.945753682187581285828323760141839199388200516064948779769654e-02,\n  3.321267405934100173976365318215912897978337413267096043323351e-02,\n  3.606553566956169655423291417133403299517350518618994762730612e-03,\n  -1.073317548333057504431811410651364448111548781143923213370333e-02,\n  1.395351747052901165789318447957707567660542855688552426721117e-03,\n  1.992405295185056117158742242640643211762555365514105280067936e-03,\n  -6.858566949597116265613709819265714196625043336786920516211903e-04,\n  -1.164668551292854509514809710258991891527461854347597362819235e-04,\n  9.358867032006959133405013034222854399688456215297276443521873e-05,\n  -1.326420289452124481243667531226683305749240960605829756400674e-05\n];\n","export * from './daubechies/daubechies';\n\nimport {\n  Db2Wavelet,\n  Db3Wavelet,\n  Db4Wavelet,\n  Db5Wavelet,\n  Db6Wavelet,\n  Db7Wavelet,\n  Db8Wavelet,\n  Db9Wavelet,\n  Db10Wavelet,\n  HaarWavelet,\n} from './daubechies/daubechies';\n\n/**\n * Filters for a transform.\n */\nexport interface Filters {\n  \n  /**\n   * High-pass filter.\n   */\n  high: number[];\n\n  /**\n   * Low-pass filter.\n   */\n  low: number[];\n};\n\n/**\n * A wavelet, which can either be described by a wavelet basis or a wavelet\n * type.\n */\nexport type Wavelet = WaveletBasis | WaveletType;\n\n/**\n * A wavelet basis.\n */\nexport interface WaveletBasis {\n\n  /**\n   * Decomposition filters.\n   */\n  dec: Filters;\n\n  /**\n   * Reconstruction filters.\n   */\n  rec: Filters;\n}\n\n/**\n * Mapping of wavelet type keys to scaling numbers.\n */\nexport const ScalingNumbers: { [key: string]: ReadonlyArray<number> } = {\n  'db1': HaarWavelet,\n  'db2': Db2Wavelet,\n  'db3': Db3Wavelet,\n  'db4': Db4Wavelet,\n  'db5': Db5Wavelet,\n  'db6': Db6Wavelet,\n  'db7': Db7Wavelet,\n  'db8': Db8Wavelet,\n  'db9': Db9Wavelet,\n  'db10': Db10Wavelet,\n  'D2': HaarWavelet,\n  'D4': Db2Wavelet,\n  'D6': Db3Wavelet,\n  'D8': Db4Wavelet,\n  'D10': Db5Wavelet,\n  'D12': Db6Wavelet,\n  'D14': Db7Wavelet,\n  'D16': Db8Wavelet,\n  'D18': Db9Wavelet,\n  'D20': Db10Wavelet,\n  'haar': HaarWavelet,\n};\n\n/**\n * Short forms for common wavelet bases.\n */\nexport type WaveletType =\n      'db1'  | 'D2'  | 'haar'\n    | 'db2'  | 'D4'\n    | 'db3'  | 'D6'\n    | 'db4'  | 'D8'\n    | 'db5'  | 'D10'\n    | 'db6'  | 'D12'\n    | 'db7'  | 'D14'\n    | 'db8'  | 'D16'\n    | 'db9'  | 'D18'\n    | 'db10' | 'D20';\n","import {\n  PaddingMode,\n  PaddingWidths,\n} from \"./wt\";\nimport {\n  antisymmetricPadding,\n  constantPadding,\n  PADDING_MODES,\n  periodicPadding,\n  reflectPadding,\n  smoothPadding,\n  symmetricPadding,\n  zeroPadding,\n  onePadding,\n} from \"./padding/padding\";\nimport {\n  Filters,\n  ScalingNumbers,\n  Wavelet,\n  WaveletBasis,\n} from \"./wavelets/wavelets\";\n\n/**\n * Calculates the element-wise sum of two arrays.\n * \n * @param  a First array.\n * @param  b Second array.\n * @return   Element-wise sum.\n */\nexport function add(\n  a: ReadonlyArray<number>,\n  b: ReadonlyArray<number>,\n): number[] {\n  /* Check for same length of arrays. */\n  if (a.length !== b.length) {\n    throw new Error('Both arrays have to have the same length.');\n  }\n\n  /* Calculate element-wise sum. */\n  return a.map((value, index) => value + b[index]);\n}\n\n/**\n * Asserts if approximation and detail coefficients are valid or throws an\n * error if they are invalid. \n * \n * @param  approx Approximation coefficients.\n * @param  detail Detail coefficients.\n * @return        True if the coefficients are valid, otherwise throws an error.\n */\nexport function assertValidApproxDetail(\n  approx: ReadonlyArray<number>,\n  detail: ReadonlyArray<number>,\n): boolean {\n  /* Check if coefficients have equal length. */\n  if (approx.length !== detail.length) {\n    throw new Error('Approximation and detail coefficients must have equal length.');\n  }\n\n  /* Check for coefficients of zero length. */\n  if (approx.length === 0) {\n    throw new Error('Approximation and detail coefficients must not have zero length.');\n  }\n\n  return true;\n}\n\n/**\n * Asserts if coefficients are valid or throws an error if they are invalid.\n * \n * @param  coeffs Coefficients to test.\n * @return        True if the coefficients are valid, otherwise throws an error.\n */\nexport function assertValidCoeffs(\n  coeffs: ReadonlyArray<ReadonlyArray<number>>,\n): boolean {\n  /* Check if at least an array of approximation coefficients is given. */\n  if (coeffs.length < 1) {\n    throw new Error(\n      'Invalid coefficients. Array length must not be zero.'\n    );\n  }\n\n  return true;\n}\n\n/**\n * Asserts if wavelet filters are valid or throws an error if they are invalid.\n * \n * @param  filters Wavelet filters to test.\n * @return         True if the wavelet filters are valid, otherwise throws an error.\n */\nexport function assertValidFilters(\n  filters: Readonly<Filters>,\n): boolean {\n  /* Check if high-pass and low-pass filters have equal length. */\n  if (filters.high.length !== filters.low.length) {\n    throw new Error('High-pass and low-pass filters have to have equal length.');\n  }\n\n  /* Check if filter length is larger than or equal to two. */\n  if (filters.low.length < 2) {\n    throw new Error('Wavelet filter length has to be larger than or equal to two.');\n  }\n\n  return true;\n}\n\n/**\n * Determines a wavelet basis from a wavelet type or basis.\n * \n * @param  wavelet Wavelet type or basis.\n * @return         Wavelet basis.\n */\nexport function basisFromWavelet(wavelet: Readonly<Wavelet>): WaveletBasis {\n  return (typeof wavelet !== 'string')\n    ? wavelet\n    : waveletFromScalingNumbers(ScalingNumbers[wavelet]); \n}\n\n/**\n * Creates an array and populates it.\n * \n * @param  length   Length of the array.\n * @param  populate Function to populate the array.\n * @return          Populated array with specified length.\n */\nexport function createArray(\n  length: number,\n  populate: number | ((index: number) => number) = 0,\n): number[] {\n  /* Check for non-integer length. */\n  if (!Number.isInteger(length)) {\n    throw new Error('Length has to be an integer.');\n  }\n\n  /* Check for length less than zero. */\n  if (length < 0) {\n    throw new Error('Length must not be smaller than zero.')\n  }\n\n  /* Create and populate array. */\n  return Array.apply(null, Array(length)).map((_, index) =>\n    (typeof populate === 'function')\n      ? populate(index)\n      : populate\n  );\n}\n\n/**\n * Calculates the dot product of two arrays.\n * \n * @param  a First array.\n * @param  b Second array.\n * @return   Dot product.\n */\nexport function dot(\n  a: ReadonlyArray<number>,\n  b: ReadonlyArray<number>,\n): number {\n  /* Check for same length of arrays. */\n  if (a.length !== b.length) {\n    throw new Error('Both arrays have to have the same length.');\n  }\n\n  /* Calculate dot product. */\n  return a.reduce((dot, value, index) => dot + value * b[index], 0);\n}\n\n/**\n * Multiplies an array with a scalar value.\n * \n * @param  scalar Scalar value.\n * @param  array  Array of numbers.\n * @return        Array multiplied with scalar value.\n */\nexport function mulScalar(\n  scalar: number,\n  array: ReadonlyArray<number>,\n): number[] {\n  return array.map(value => scalar * value);\n}\n\n/**\n * Returns a single padding element.\n * \n * @param  data    Input data.\n * @param  index   Index of padding element.\n * @param  inverse True if the padding direction is inversed.\n * @param  mode    Signal extension mode.\n * @return         Single padding element.\n */\nexport function padElement(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean,\n  mode: PaddingMode,\n): number {\n  switch (mode) {\n    case PADDING_MODES.antisymmetric:\n      return antisymmetricPadding(data, index, inverse);\n    case PADDING_MODES.constant:\n      return constantPadding(data, inverse);\n    case PADDING_MODES.periodic:\n      return periodicPadding(data, index, inverse);\n    case PADDING_MODES.reflect:\n      return reflectPadding(data, index, inverse);\n    case PADDING_MODES.smooth:\n      return smoothPadding(data, index, inverse);\n    case PADDING_MODES.symmetric:\n      return symmetricPadding(data, index, inverse);\n    case PADDING_MODES.zero:\n      return zeroPadding();\n    case PADDING_MODES.one:\n      return onePadding();\n    default:\n      throw new Error('Unknown signal extension mode: \"' + mode + '\"');\n  }\n}\n\n/**\n * Determines the padding widths.\n * \n * @param  dataLength   Length of signal.\n * @param  filterLength Length of filter.\n * @return              Padding widths.\n */\nexport function padWidths(\n  dataLength: number,\n  filterLength: number,\n): PaddingWidths {\n  /* Check for valid data length. */\n  if (dataLength <= 0) {\n    throw new Error('Cannot determine padding widths for data of length less than or equal to zero.');\n  }\n\n  /* Check for valid filter length. */\n  if (filterLength < 2) {\n    throw new Error('Cannot determine padding widths for filter of length less than two.');\n  }\n\n  /* Determine padding widths. */\n  return [\n    filterLength - 2,\n    ((dataLength + filterLength) % 2 === 0)\n      ? filterLength - 2\n      : filterLength - 1\n  ];\n}\n\n/**\n * Determines a wavelet basis from scaling numbers.\n * \n * @param  scalingNumbers Wavelet scaling numbers.\n * @return                Wavelet basis.\n */\nexport function waveletFromScalingNumbers(\n  scalingNumbers: ReadonlyArray<number>,\n): WaveletBasis {\n  /* Check if length is larger than or equal to two. */\n  if (scalingNumbers.length < 2) {\n    throw new Error(\n      'Scaling numbers length has to be larger than or equal to two.'\n    );\n  }\n\n  /* Determine wavelet numbers. */\n  const waveletNumbers: ReadonlyArray<number> =\n      scalingNumbers.slice() // Copy array\n      .reverse()\n      .map((value, index) => (index % 2 === 0) ? value : -value);\n  \n  /* Determine wavelet basis. */\n  return {\n    dec: {\n      low: scalingNumbers.slice(),\n      high: waveletNumbers.slice(),\n    },\n    rec: {\n      low: scalingNumbers.slice(),\n      high: waveletNumbers.slice()\n    },\n  };\n}\n","export {\n  PaddingMode,\n  PaddingModes,\n  PaddingWidths,\n} from './padding/padding';\n\nexport {\n  Filters,\n  Wavelet,\n  WaveletBasis,\n  WaveletType,\n} from './wavelets/wavelets';\n\nimport {\n  add,\n  assertValidApproxDetail,\n  assertValidCoeffs,\n  assertValidFilters,\n  basisFromWavelet,\n  createArray,\n  dot,\n  mulScalar,\n  padElement,\n  padWidths,\n} from './helpers';\n\nimport {\n  PADDING_MODES,\n  PaddingMode,\n  PaddingModes,\n  PaddingWidths,\n} from './padding/padding';\n\nimport {\n  Filters,\n  Wavelet,\n  WaveletBasis,\n} from \"./wavelets/wavelets\";\n\n/**\n * Default padding mode to use.\n */\nconst DEFAULT_PADDING_MODE: PaddingMode = PADDING_MODES.symmetric;\n\nexport namespace DiscreteWavelets {\n  export interface WaveletCoefficients2D {\n      approximation: number[][];  // This is the LL band\n      details: { \n          LH: number[][],\n          HL: number[][],\n          HH: number[][]\n      }[];  // Mind that this is an array of objects!\n      // Information of the original input size must be kept to reliably undo the padding in the last step of waverec2()\n      size: [number, number];\n  }\n\n  export interface WaveletBands2D {\n      LL: number[][],\n      LH: number[][],\n      HL: number[][],\n      HH: number[][],\n  }\n\n  export type DecompositionMode = 'regular'|'taintAnalysisSyntheticity'|'taintAnalysisContamination';  \n}\n\n/**\n * Collection of methods for Discrete Wavelet Transform (DWT).\n */\nexport default class DiscreteWavelets {\n  /**\n   * Contains static information about the signal extension modes.\n   */\n  static readonly Modes: Readonly<PaddingModes> = PADDING_MODES;\n\n\n  private static transposeMatrix (somearray: number[][]): number[][] {\n      return Array.from({ length: somearray[0].length }, (_, rowIndex) => {\n          return Array.from({ length: somearray.length }, (_, colIndex) => \n              somearray[colIndex][rowIndex]\n          );\n      });\n  }  \n\n/**\n *     2-D FUNCTIONS\n */\n\n  /**\n   * Determines the maximum level of useful decomposition in 2d.\n   *\n   * @param  dataLength              Length of input data.\n   * @param  wavelet                 Wavelet to use.\n   * @param  roundingOption          When set to LOW, it uses floor(log_2(.)) to calculate the maximum level. When set to HIGH, it uses ceil(floor_2(.)). Defaults to LOW.\n   * @param  allowDimensionDowngrade When set to true, it allows to consider decompositions where one of the dimensions disappears. When set to false, it forces all decompositions to have 2x2 input size at least.\n   * @return                         Maximum useful level of decomposition.\n   */\n  static maxLevel2(\n      size: [number, number], \n      wavelet: Wavelet,\n      roundingOption: 'LOW'|'HIGH' = 'LOW',\n      allowDimensionDowngrade: boolean = true,\n  ): number {\n      if (allowDimensionDowngrade) {\n        return Math.max(\n          this.maxLevel(size[0], wavelet, roundingOption),\n          this.maxLevel(size[1], wavelet, roundingOption),\n        );\n      } else {\n        return Math.min(\n          this.maxLevel(size[0], wavelet, roundingOption),\n          this.maxLevel(size[1], wavelet, roundingOption),\n        );\n      }\n  }\n\n  private static dwtRows(\n      matrix: number[][], \n      wavelet: Wavelet, \n      padding: PaddingMode,\n      mode: DiscreteWavelets.DecompositionMode = 'regular',\n  ): {cA: number[][], cD: number[][]} {\n      const rows = matrix.length;\n      //const cols = matrix[0].length;\n\n      const cA: number[][] = [];\n      const cD: number[][] = [];\n\n      for (let r = 0; r < rows; r++) {\n          const [approx, detail] = this.dwt(matrix[r], wavelet, padding, mode);  // approx.length = detail.length = padding + cols / 2\n          cA.push(approx);\n          cD.push(detail);\n      }\n      return { cA, cD };  // cA.length = cD.length = rows\n  }\n\n  private static dwtCols(\n      cA: number[][], \n      cD: number[][], \n      wavelet: Wavelet, \n      padding: PaddingMode,\n      mode: DiscreteWavelets.DecompositionMode = 'regular',\n  ): DiscreteWavelets.WaveletBands2D {\n      //const rows = cA.length;\n      const cols = cA[0].length;\n\n      // This initialization is necessary for later to be able to access bands.something; otherwise bands is undefined so that we cannot access sub-fields\n      let bands: DiscreteWavelets.WaveletBands2D = { \n        LL: Array.from({ length: cols }, () => []), \n        LH: Array.from({ length: cols }, () => []), \n        HL: Array.from({ length: cols }, () => []), \n        HH: Array.from({ length: cols }, () => []), \n      };\n\n      for (let col = 0; col < cols; col++) {\n          const recA: number[] = cA.map(r => r[col]);  // Effectively slices column col from cA[][]\n          const [A1, D1] = this.dwt(recA, wavelet, padding, mode);  // A1.length = D1.length = padding + cA.length / 2\n          const recD: number[] = cD.map(r => r[col]);  // Effectively slices column col from cD[][]\n          const [A2, D2] = this.dwt(recD, wavelet, padding, mode);  // A2.length = D2.length = padding + cD.length / 2\n\n          // Assign column results to the bands.\n          bands.LL[col] = A1;\n          bands.HL[col] = D1;\n          bands.LH[col] = A2;\n          bands.HH[col] = D2;         \n      }\n\n      // For correct matching of the coefficients with their meaning in the spatial domain\n      for (const band of ['LL', 'LH', 'HL', 'HH']) {\n        bands[band as keyof DiscreteWavelets.WaveletBands2D] = this.transposeMatrix(bands[band as keyof DiscreteWavelets.WaveletBands2D]);\n      }\n\n      return bands;\n  }\n\n  private static idwtRows(\n      cA: number[][], \n      cD: number[][], \n      wavelet: Wavelet,\n  ): number[][] {\n      const rows = cA.length;\n      const result: number[][] = [];\n\n      for (let r = 0; r < rows; r++) {\n          const row = this.idwt(cA[r], cD[r], wavelet);\n          result.push(row);\n      }\n\n      return result;\n  }\n\n  private static idwtCols(\n      bands: DiscreteWavelets.WaveletBands2D,\n      wavelet: Wavelet,\n  ): { cA: number[][], cD: number[][] } {\n\n      // For correct matching of the coefficients with their meaning in the spatial domain\n      let bandsT: DiscreteWavelets.WaveletBands2D = { LL: [], LH: [], HL: [], HH: [] };\n      for (const band of ['LL', 'LH', 'HL', 'HH']) {\n        bandsT[band as keyof DiscreteWavelets.WaveletBands2D] = this.transposeMatrix(bands[band as keyof DiscreteWavelets.WaveletBands2D]);\n      }\n\n      let trimmedLL = bandsT.LL.map(row => [...row]);\n\n      // Undo the padding(s)\n      // !!! Assuming that the decimation factor is 2\n      if (bandsT.LL.length > bandsT.LH.length) {\n          trimmedLL.pop();\n      }\n      if (bandsT.LL[0].length > bandsT.LH[0].length) {\n          for (const row of trimmedLL) {\n              row.pop();\n          }\n      }\n\n      const cols = trimmedLL.length;\n      const rows = trimmedLL[0].length * 2;\n\n      const cA: number[][] = Array.from({ length: rows }, () => Array(cols).fill(0));\n      const cD: number[][] = Array.from({ length: rows }, () => Array(cols).fill(0));\n\n      for (let col = 0; col < cols; col++) {\n          const recA = this.idwt(trimmedLL[col]/*approx*/, bandsT.HL[col]/*details*/, wavelet);\n          const recD = this.idwt(bandsT.LH[col]/*approx*/, bandsT.HH[col]/*details*/, wavelet);\n\n          for (let r = 0; r < recA.length; r++) {\n              cA[r][col] = recA[r];\n              cD[r][col] = recD[r]\n          } \n      }\n\n      return { cA, cD };\n  }\n\n  /**\n   * Single level 2D Discrete Wavelet Transform.\n   *\n   * @param  data     Input data.\n   * @param  wavelet  Wavelet to use.\n   * @param  padding  Signal extension mode.\n   * @param  mode     When set to 'regular' it performs the DWT on the input data. When set to 'taintAnalysisSyntheticity' it performs a taint analysis to detect synthetic zero values. When set to 'taintAnalysisContamination' it performs taint analysis to see hich values are affected by edge effects.\n   * @return          Approximation and detail coefficients as result of the transform, or results of the taint analysis (check the documentation).\n   */  \n  static dwt2(\n      data: number[][],\n      wavelet: Wavelet,\n      padding: PaddingMode = 'symmetric',\n      mode: DiscreteWavelets.DecompositionMode = 'regular',\n  ): DiscreteWavelets.WaveletBands2D {\n      const { cA, cD } = this.dwtRows(data, wavelet, padding, mode);\n      const bandsValues = this.dwtCols(cA, cD, wavelet, padding, mode);\n      return bandsValues;\n  }\n\n  /**\n   * 2D wavelet decomposition. Transforms data by calculating coefficients from\n   * input data.\n   *\n   * @param  data                    Input data.\n   * @param  wavelet                 Wavelet to use.\n   * @param  padding                    Signal extension mode.\n   * @param  level                   Decomposition level or roundingOption parameter for calculating via maxLevel2 function. Defaults to 'LOW'.\n   * @param  allowDimensionDowngrade allowDimensionDowngrade parameter for maxLevel2. Defaults to true. Only applies when level parameter is 'LOW' or 'HIGH'.\n   * @return                         Coefficients as result of the transform, and the syntheticityMask matrix that indicates which 0 coefficients are meaningless.\n   */  \n  static wavedec2(\n      data: number[][],\n      wavelet: Wavelet,\n      padding: PaddingMode = 'symmetric',\n      level: number|'LOW'|'HIGH' = 'LOW',\n      allowDimensionDowngrade: boolean = true,\n  ): { \n    coeffs: DiscreteWavelets.WaveletCoefficients2D, \n    syntheticityMask: DiscreteWavelets.WaveletCoefficients2D,\n    contaminationMask: DiscreteWavelets.WaveletCoefficients2D,\n   } {\n\n      const rows = data.length;\n      const cols = data[0].length;\n\n      let numLevels: number;\n      if (typeof level === 'string') {\n          numLevels = this.maxLevel2([rows, cols], wavelet, level, allowDimensionDowngrade);\n      } else {\n          numLevels = level;\n      }\n\n      let current: number[][] = data;\n      // We will use the taint analysis technique to track which coefficients are affected by original data (0) and which not(1)\n      // Coefficients that are not affected by original data must be a result of padding; they are synthetic\n      let currentSyntheticityMask: number[][] = Array.from({ length: data.length }, () => Array(data[0].length).fill(0));  // Creates an array with the same shape as data, but with all values as 0\n      let currentContaminationMask: number[][] = Array.from({ length: data.length }, () => Array(data[0].length).fill(0));  // Creates an array with the same shape as data, but with all values as 0\n\n      const coeffs: DiscreteWavelets.WaveletCoefficients2D = {\n        // We need to initialize approximation:data, because there is the possibility that numLevels==0 \n        approximation: data,  // Reminder: WaveletCoefficients2D['approximation'] is number[][]\n        details: [],  // Reminder: WaveletCoefficients2D['details'] variable types are an array of objects, where each object has 3 elements, and each element is a number[][]\n        size: [rows,cols],\n      }\n\n      // This will store a syntheticityMask matrix of coefficients, where 1 means that that position on the transform\n      // result is a synthetic zero produced by the padding, and 0 means 'position with actual data'\n      const syntheticityMask: DiscreteWavelets.WaveletCoefficients2D = {\n        approximation: Array.from({ length: data.length }, () => Array(data[0].length).fill(0)),  // We need to initialize here again in case level==0\n        details: [],\n        size: [rows,cols],  // This would not be strictly necessary in the data model\n      }\n\n      // This will store a contaminationMask matrix of coefficients, where a value v greater than 0 means that that position on the transform\n      // result is affected by v effects of edges, and 0 means 'position with no edge effects'\n      const contaminationMask: DiscreteWavelets.WaveletCoefficients2D = {\n        approximation: Array.from({ length: data.length }, () => Array(data[0].length).fill(0)),  // We need to initialize here again in case level==0\n        details: [],\n        size: [rows,cols],  // This would not be strictly necessary in the data model\n      }\n\n      for (let level = 0; level < numLevels; level++) {\n\n          const bands: DiscreteWavelets.WaveletBands2D = this.dwt2(current, wavelet, padding);  // Perform one level of decomposition (regular DWT)\n          const bandsSyntheticityMask: DiscreteWavelets.WaveletBands2D = this.dwt2(currentSyntheticityMask, wavelet, padding, 'taintAnalysisSyntheticity');  // Perform taint analysis to detect synthetic coefficients\n          const bandsContaminationMask: DiscreteWavelets.WaveletBands2D = this.dwt2(currentContaminationMask, wavelet, padding, 'taintAnalysisContamination');  // Perform taint analysis to detect coefficients affected by edges\n\n          // We keep LL for the next iteration or as the last-level approximation\n          coeffs.approximation = bands.LL;\n          syntheticityMask.approximation = bandsSyntheticityMask.LL;\n          contaminationMask.approximation = bandsContaminationMask.LL;\n          // We push this result to the matrix, so that details[0] will be the first-level decomposition and details[details.length-1] will be the last-level decomposition\n          coeffs.details.push({ LH: bands.LH, HL: bands.HL, HH: bands.HH });\n          syntheticityMask.details.push({ LH: bandsSyntheticityMask.LH, HL: bandsSyntheticityMask.HL, HH: bandsSyntheticityMask.HH });\n          contaminationMask.details.push({ LH: bandsContaminationMask.LH, HL: bandsContaminationMask.HL, HH: bandsContaminationMask.HH });\n\n          current = coeffs.approximation; // Recurse only on the LL band\n          currentSyntheticityMask = syntheticityMask.approximation;\n          currentContaminationMask = contaminationMask.approximation;\n      }\n\n      return { coeffs, syntheticityMask, contaminationMask };\n  }\n\n  /**\n   * Single level inverse 2D Discrete Wavelet Transform.\n   *\n   * @param  approx  Approximation coefficients. If undefined, it will be set to an array of zeros with length equal to the detail coefficients.\n   * @param  detail  Detail coefficients. If undefined, it will be set to an array of zeros with length equal to the approximation coefficients.\n   * @param  wavelet Wavelet to use.\n   * @return         Approximation coefficients of previous level of transform.\n   */  \n  static idwt2(\n      approx: number[][],\n      detail: { LH: number[][], HL: number[][], HH: number[][] },\n      wavelet: Wavelet,\n  ): number[][] {\n      const bandsValues: DiscreteWavelets.WaveletBands2D = { LL: approx, LH: detail.LH, HL:detail.HL, HH: detail.HH };\n      const { cA, cD } = this.idwtCols(bandsValues,  wavelet);\n      let data = this.idwtRows(cA, cD, wavelet); \n      return data;\n  }\n\n  /**\n   * 2D wavelet reconstruction. Inverses a transform by calculating input data\n   * from coefficients.\n   *\n   * @param  coeffs  Coefficients as result of a transform.\n   * @param  wavelet Wavelet to use.\n   * @return         Input data as result of the inverse transform.\n   */  \n  static waverec2(\n      coeffs: DiscreteWavelets.WaveletCoefficients2D,\n      wavelet: Wavelet,\n  ): number[][] {\n\n      let current: number[][] = coeffs.approximation;\n\n      for (let level = coeffs.details.length - 1; level >= 0; level--) {\n\n          current = this.idwt2(current, coeffs.details[level], wavelet);  // Perform one level of recomposition\n\n      }\n\n      // Undo the padding(s) of the last step\n      // !!! Assuming that the decimation factor is 2\n      if (current.length > coeffs.size[0]) {\n          current.pop();\n      }\n      if (current[0].length > coeffs.size[1]) {\n          for (const row of current) {\n              row.pop();\n          }\n      }\n\n      return current;\n  } \n\n\n\n\n/**\n *     1-D FUNCTIONS\n */\n\n\n  /**\n   * Single level 1D Discrete Wavelet Transform.\n   *\n   * @param  data     Input data.\n   * @param  wavelet  Wavelet to use.\n   * @param  padding  Signal extension mode.\n   * @param  mode     When set to 'regular' it performs the DWT on the input data. When set to 'taintAnalysisSyntheticity' it performs a taint analysis to detect synthetic zero values. When set to 'taintAnalysisContamination' it performs taint analysis to see hich values are affected by edge effects.\n   * @return          Approximation and detail coefficients as result of the transform, or results of the taint analysis (check the documentation).\n   */\n  static dwt(\n    data: ReadonlyArray<number>,\n    wavelet: Readonly<Wavelet>,\n    padding: PaddingMode = DEFAULT_PADDING_MODE,\n    mode: DiscreteWavelets.DecompositionMode = 'regular',\n  ): number[][] {\n\n    /* Determine wavelet basis and filters. */\n    const waveletBasis: Readonly<WaveletBasis> = basisFromWavelet(wavelet);\n    const filters: Readonly<Filters> = waveletBasis.dec;\n    assertValidFilters(filters);\n    const filterLength: number = filters.low.length;\n\n    /* Add padding. */\n    let paddingModeFinal;\n    switch (mode) {\n      case 'taintAnalysisSyntheticity':\n      case 'taintAnalysisContamination':\n        paddingModeFinal = PADDING_MODES.one;\n        break;\n      default:\n        paddingModeFinal = padding;\n    }\n    data = this.pad(data, padWidths(data.length, filterLength), paddingModeFinal);\n\n    /* Initialize approximation and detail coefficients. */\n    let approx: number[] = [];\n    let detail: number[] = [];\n\n    /* Calculate coefficients. */\n    for (let offset: number = 0; offset + filterLength <= data.length; offset += filterLength) {\n      /* Determine slice of values. */\n      const values: ReadonlyArray<number> = data.slice(offset, offset + filterLength);\n\n      if (mode==='taintAnalysisSyntheticity') {\n        if (filterLength==2 && padding=='symmetric' && wavelet=='haar') {\n          /*\n          // Haar filters are [f1,-f1] (high-pass, details) and [f1,f1] (low-pass, approx), with f1=0.7071...\n          if (values[0]==0 && values[1]==1) {\n            approx.push(0);  // Dotproduct of [a,a] with [f1,f1] depends on a\n            detail.push(1);  // Dotproduct of [a,a] with [f1,-f1] is always 0\n          } else if (values[0]==1 && values[1]==1) {\n            // Dotproduct of [0,0] with [_,_] is always 0\n            approx.push(1);\n            detail.push(1);\n          } else {  // (values[0]==0 && values[1]==0)\n            // The result of the dotproduct depents on values[0] and values[1]\n            approx.push(0);\n            detail.push(0);\n          }\n          // (values[0]==1 && values[1]==0) => not possible because (padding U synthetic zeros) can only exist contiguously in edges\n          */\n          approx.push(values[0] && values[1]);\n          detail.push(values[0] || values[1]);\n        } else {\n          // NOT IMPLEMENTED !\n          approx.push(NaN);\n          detail.push(NaN);\n        }\n      } else if (mode==='taintAnalysisContamination') {\n        if (filterLength==2 && padding=='symmetric' && wavelet=='haar') {\n          /*\n          // Haar filters are [f1,-f1] (high-pass, details) and [f1,f1] (low-pass, approx), with f1=0.7071...\n          if (values[0]==0 && values[1]==1) {\n            approx.push(values[0]+values[1]);  // Dotproduct of [a,a] with [f1,f1] depends on a only\n            detail.push(not relevant);  // Dotproduct of [a,a] with [f1,-f1] is always 0\n          } else if (values[0]==1 && values[1]==1) {\n            // Dotproduct of [0,0] with [_,_] is always 0\n            approx.push(not relevant);\n            detail.push(not relevant);\n          } else {  // (values[0]==0 && values[1]==0)\n            // The result of the dotproduct depents on values[0] and values[1]\n            approx.push(values[0]+values[1]);\n            detail.push(values[0]+values[1]);\n          }\n          // (values[0]==1 && values[1]==0) => not possible because (padding U synthetic zeros) can only exist contiguously in edges\n          */\n          approx.push(values[0]+values[1]);\n          detail.push(values[0]+values[1]);\n        } else {\n          // NOT IMPLEMENTED !\n          approx.push(NaN);\n          detail.push(NaN);\n        }\n      } else {  // mode==='regular'\n        /* Calculate approximation coefficients. */\n        approx.push(dot(values, filters.low));\n\n        /* Calculate detail coefficients. */\n        detail.push(dot(values, filters.high));\n      }\n    }\n\n    /* Return approximation and detail coefficients. */\n    return [approx, detail];\n  }\n\n  /**\n   * Calculates the energy as sum of squares of an array of data or\n   * coefficients.\n   *\n   * @param  values Array of data or coefficients.\n   * @return        Energy of values as the sum of squares.\n   */\n  static energy(values: ReadonlyArray<number> | ReadonlyArray<ReadonlyArray<number>>): number {\n    let energy: number = 0;\n    for (const value of values) {\n      if (typeof value === \"number\") energy += Math.pow(value, 2);\n      else energy += this.energy(value);\n    }\n    return energy;\n  }\n\n  /**\n   * Single level inverse 1D Discrete Wavelet Transform.\n   *\n   * @param  approx  Approximation coefficients. If undefined, it will be set to an array of zeros with length equal to the detail coefficients.\n   * @param  detail  Detail coefficients. If undefined, it will be set to an array of zeros with length equal to the approximation coefficients.\n   * @param  wavelet Wavelet to use.\n   * @return         Approximation coefficients of previous level of transform.\n   */\n  static idwt(\n    approx: ReadonlyArray<number> | undefined,\n    detail: ReadonlyArray<number> | undefined,\n    wavelet: Wavelet\n  ): number[] {\n    /* Fill empty array with zeros. */\n    if (approx === undefined && detail !== undefined) {\n      approx = createArray(detail.length, 0);\n    }\n    if (detail === undefined && approx !== undefined) {\n      detail = createArray(approx.length, 0);\n    }\n\n    /* Check if some coefficients are undefined. */\n    if (approx === undefined || detail === undefined) {\n      throw new Error(\"Coefficients must not be undefined.\");\n    }\n\n    assertValidApproxDetail(approx, detail);\n\n    /* Determine wavelet basis and filters. */\n    const waveletBasis: Readonly<WaveletBasis> = basisFromWavelet(wavelet);\n    const filters: Readonly<Filters> = waveletBasis.rec;\n    assertValidFilters(filters);\n    const filterLength: number = filters.low.length;\n\n    /* Initialize transform. */\n    const coeffLength: number = approx.length;\n    let pad: ReadonlyArray<number> = createArray(filterLength + (coeffLength - 1) * 2, 0);\n\n    /* Perform inverse Discrete Wavelet Transform. */\n    for (let i = 0; i < coeffLength; i++) {\n      const offset: number = 2 * i;\n\n      /* Calculate values. */\n      let values: ReadonlyArray<number> = pad.slice(offset, offset + filterLength);\n      values = add(values, mulScalar(approx[i], filters.low));\n      values = add(values, mulScalar(detail[i], filters.high));\n\n      /* Update values. */\n      pad = pad\n        .slice(0, offset)\n        .concat(values)\n        .concat(pad.slice(offset + values.length));\n    }\n\n    /* Remove padding. */\n    return pad.slice(filterLength - 2, pad.length - (filterLength - 2));\n  }\n\n  /**\n   * Determines the maximum level of useful decomposition in 1D.\n   *\n   * @param  dataLength     Length of input data.\n   * @param  wavelet        Wavelet to use.\n   * @param  roundingOption When set to LOW, it uses floor(log_2(.)) to calculate the maximum level. When set to HIGH, it uses ceil(floor_2(.)). Defaults to LOW\n   * @return                Maximum useful level of decomposition.\n   */\n  static maxLevel(\n    dataLength: number, \n    wavelet: Readonly<Wavelet>, \n    roundingOption: 'LOW'|'HIGH' = 'LOW',\n  ): number {\n    /* Check for non-integer length. */\n    if (!Number.isInteger(dataLength)) {\n      throw new Error(\"Length of data is not an integer. This is not allowed.\");\n    }\n\n    /* Check for invalid input. */\n    if (dataLength < 0) {\n      throw new Error(\"Data length cannot be less than zero.\");\n    }\n\n    /* Return zero for data of zero length. */\n    if (dataLength === 0) return 0;\n\n    /* Determine wavelet basis. */\n    const waveletBasis: Readonly<WaveletBasis> = basisFromWavelet(wavelet);\n\n    /* Determine length of filter. */\n    const filterLength: number = waveletBasis.dec.low.length;\n\n    if (roundingOption === 'LOW') {\n      // SOURCE: https://pywavelets.readthedocs.io/en/latest/ref/dwt-discrete-wavelet-transform.html#maximum-decomposition-level-dwt-max-level-dwtn-max-level\n      return Math.max(0, Math.floor(Math.log2(dataLength / (filterLength - 1))));\n    } else {\n      return Math.max(0, Math.ceil(Math.log2(dataLength / (filterLength - 1))));\n    }\n  }\n\n  /**\n   * Extends a signal with a given padding mode.\n   *\n   * @param  data      Input data.\n   * @param  padWidths Widths of padding at front and back.\n   * @param  padding   Signal extension mode.\n   * @return           Data with padding.\n   */\n  static pad(\n    data: ReadonlyArray<number>,\n    padWidths: Readonly<PaddingWidths>,\n    padding: PaddingMode\n  ): number[] {\n    /* Check for undefined data. */\n    if (!data) {\n      throw new Error(\"Cannot add padding to empty data.\");\n    }\n\n    /* Initialize. */\n    const front: number = padWidths[0];\n    const back: number = padWidths[1];\n\n    /* Add padding. */\n    return createArray(front, (index) => padElement(data, front - 1 - index, true, padding))\n      .concat(data)\n      .concat(createArray(back, (index) => padElement(data, index, false, padding)));\n  }\n\n  /**\n   * 1D wavelet decomposition. Transforms data by calculating coefficients from\n   * input data.\n   *\n   * @param  data           Input data.\n   * @param  wavelet        Wavelet to use.\n   * @param  padding           Signal extension mode.\n   * @param  level          Decomposition level or roundingOption for calculating via maxLevel function. Defaults to level calculated by maxLevel function with 'LOW' Roundingoption.\n   * @return                Coefficients as result of the transform.\n   */\n  static wavedec(\n    data: ReadonlyArray<number>,\n    wavelet: Readonly<Wavelet>,\n    padding: PaddingMode = DEFAULT_PADDING_MODE,\n    level: number|'LOW'|'HIGH' = 'LOW',\n  ): number[][] {\n    /* Determine decomposition level. */\n    if (typeof level === 'string') {\n      level = this.maxLevel(data.length, wavelet, level);\n    } else if (level < 0) {\n      throw new Error(\"Decomposition level must not be less than zero\");\n    }\n\n    /*  Initialize transform. */\n    let coeffs: number[][] = [];\n    let approx: ReadonlyArray<number> = data.slice();\n\n    /* Transform. */\n    for (let l: number = 1; l <= level; l++) {\n      /* Perform single level transform. */\n      const approxDetail: ReadonlyArray<ReadonlyArray<number>> = this.dwt(approx, wavelet, padding);\n      approx = approxDetail[0];\n      const detail: ReadonlyArray<number> = approxDetail[1];\n\n      /* Prepend detail coefficients. */\n      coeffs.unshift(detail.slice());\n    }\n\n    /* Prepend last approximation. */\n    coeffs.unshift(approx.slice());\n\n    /* Return coefficients. */\n    return coeffs;\n  }\n\n  /**\n   * 1D wavelet reconstruction. Inverses a transform by calculating input data\n   * from coefficients.\n   *\n   * @param  coeffs  Coefficients as result of a transform.\n   * @param  wavelet Wavelet to use.\n   * @return         Input data as result of the inverse transform.\n   */\n  static waverec(coeffs: ReadonlyArray<ReadonlyArray<number>>, wavelet: Wavelet): number[] {\n    /* Check if coefficients are valid. */\n    assertValidCoeffs(coeffs);\n\n    /* Determine wavelet. */\n    wavelet = basisFromWavelet(wavelet);\n\n    /* Initialize transform. */\n    let approx: ReadonlyArray<number> = coeffs[0];\n\n    /* Transform. */\n    for (let i: number = 1; i < coeffs.length; i++) {\n      /* Initialize detail coefficients. */\n      const detail: ReadonlyArray<number> = coeffs[i];\n\n      // TODO: Check if problem of different coefficient lengths because of padding can be solved in a more elegant way.\n      if (approx.length === detail.length + 1) {\n        approx = approx.slice(0, approx.length - 1);\n      }\n\n      /* Calculate previous level of approximation. */\n      approx = this.idwt(approx, detail, wavelet);\n    }\n\n    /* Return data. */\n    return approx.slice();\n  }\n}\n"],"names":[],"mappings":"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"}