{"version":3,"file":"discrete-wavelets.es5.js","sources":["../src/padding/symmetric/symmetric.ts","../src/padding/antisymmetric/antisymmetric.ts","../src/padding/constant/constant.ts","../src/padding/periodic/periodic.ts","../src/padding/reflect/reflect.ts","../src/padding/smooth/smooth.ts","../src/padding/zero/zero.ts","../src/padding/padding.ts","../src/wavelets/daubechies/daubechies.ts","../src/wavelets/wavelets.ts","../src/helpers.ts","../src/wt.ts"],"sourcesContent":["import { PaddingMode } from '../padding';\n\n/**\n * Symmetric padding.\n */\nexport const SYMMETRIC_PADDING: PaddingMode = 'symmetric';\n\n/**\n * Returns a single value of symmetric padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function symmetricPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error(\n      'Cannot determine symmetric padding for data of zero length.'\n    );\n  }\n\n  /* Determine symmetric padding. */\n  const dirChanges: number = Math.floor(index / data.length);\n  const inversions: number = (inverse) ? dirChanges : dirChanges + 1;\n  return (inversions % 2 === 0)\n    ? data[index % data.length]\n    : data[data.length - 1 - (index % data.length)];\n};\n","import { PaddingMode } from '../padding';\nimport { symmetricPadding } from '../symmetric/symmetric';\n\n/**\n * Antisymmetric padding.\n */\nexport const ANTISYMMETRIC_PADDING: PaddingMode = 'antisymmetric';\n\n/**\n * Returns a single value of antisymmetric padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function antisymmetricPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  const dirChanges: number = Math.floor(index / data.length);\n  const sign: number = (dirChanges % 2 === 0) ? -1 : 1;\n  return sign * symmetricPadding(data, index, inverse);\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Constant padding.\n */\nexport const CONSTANT_PADDING: PaddingMode = 'constant';\n\n/**\n * Returns a single value of constant padding.\n * \n * @param  data    Input values.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function constantPadding(\n  data: ReadonlyArray<number>,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error(\n      'Cannot determine constant padding for data of zero length.'\n    );\n  }\n\n  /* Determine constant padding. */\n  return (!inverse)\n    ? data[data.length - 1]\n    : data[0];\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Periodic padding.\n */\nexport const PERIODIC_PADDING: PaddingMode = 'periodic';\n\n/**\n * Returns a single value of periodic padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function periodicPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error(\n      'Cannot determine periodic padding for data of zero length.'\n    );\n  }\n\n  /* Determine periodic padding. */\n  return (!inverse)\n    ? data[index % data.length]\n    : data[data.length - 1 - (index % data.length)];\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Reflect padding.\n */\nexport const REFLECT_PADDING: PaddingMode = 'reflect';\n\n/**\n * Returns a single value of reflect padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function reflectPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error(\n      'Cannot determine reflect padding for data of zero length.'\n    );\n  }\n\n  /* Return constant value for data of length one. */\n  if (data.length === 1) return data[0];\n\n  /* Determine reflect padding. */\n  const dirChanges: number = Math.floor(index / (data.length - 1));\n  const inversions: number = (inverse) ? dirChanges : dirChanges + 1;\n  return (inversions % 2 === 0)\n    ? data[index % (data.length - 1) + 1]\n    : data[data.length - 2 - (index % (data.length - 1))];\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Smooth padding.\n */\nexport const SMOOTH_PADDING: PaddingMode = 'smooth';\n\n/**\n * Returns a single value of smooth padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function smoothPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error('Cannot determine smooth padding for data of zero length.');\n  }\n\n  /* Determine line equation. */\n  const end: number = data.length - 1;\n  const offset: number = (inverse) ? data[0] : data[end];\n  const slope: number = (inverse)\n    ? (data.length === 1) ? data[0] : data[0] - data[1]\n    : (data.length === 1) ? -data[0] : data[end] - data[end - 1];\n  return offset + (index + 1) * slope;\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Zero padding.\n */\nexport const ZERO_PADDING: PaddingMode = 'zero';\n\n/**\n * Returns a single value of zero padding.\n * \n * @return         Single padding value.\n */\nexport function zeroPadding(): number {\n  return 0;\n};\n","export { antisymmetricPadding } from './antisymmetric/antisymmetric';\nexport { constantPadding } from './constant/constant';\nexport { periodicPadding } from './periodic/periodic';\nexport { reflectPadding } from './reflect/reflect';\nexport { smoothPadding } from './smooth/smooth';\nexport { symmetricPadding } from './symmetric/symmetric';\nexport { zeroPadding } from './zero/zero';\n\nimport { ANTISYMMETRIC_PADDING } from './antisymmetric/antisymmetric';\nimport { CONSTANT_PADDING } from './constant/constant';\nimport { PERIODIC_PADDING } from './periodic/periodic';\nimport { REFLECT_PADDING } from './reflect/reflect';\nimport { SMOOTH_PADDING } from './smooth/smooth';\nimport { SYMMETRIC_PADDING } from './symmetric/symmetric';\nimport { ZERO_PADDING } from './zero/zero';\n\n/**\n * Signal extension mode.\n */\nexport type PaddingMode =\n    'antisymmetric'\n    | 'constant'\n    | 'periodic'\n    | 'reflect'\n    | 'smooth'\n    | 'symmetric'\n    | 'zero';\n\n/**\n * Interface of supported padding mode.\n */\nexport interface PaddingModes {\n  antisymmetric: PaddingMode;\n  constant: PaddingMode;\n  modes: PaddingMode[];\n  periodic: PaddingMode;\n  reflect: PaddingMode;\n  smooth: PaddingMode;\n  symmetric: PaddingMode;\n  zero: PaddingMode;\n}\n\n/**\n * Supported signal extension modes.\n */\nexport const PADDING_MODES: Readonly<PaddingModes> = {\n  antisymmetric: ANTISYMMETRIC_PADDING,\n  constant: CONSTANT_PADDING,\n  periodic: PERIODIC_PADDING,\n  reflect: REFLECT_PADDING,\n  smooth: SMOOTH_PADDING,\n  symmetric: SYMMETRIC_PADDING,\n  zero: ZERO_PADDING,\n  modes: [\n    ZERO_PADDING,\n    CONSTANT_PADDING,\n    SYMMETRIC_PADDING,\n    PERIODIC_PADDING,\n    SMOOTH_PADDING,\n    REFLECT_PADDING,\n    ANTISYMMETRIC_PADDING,\n  ],\n};\n\n/**\n * Number of padded values at front and back.\n */\nexport type PaddingWidths = [number, number];\n","// SOURCE: https://github.com/PyWavelets/pywt/blob/master/pywt/_extensions/c/wavelets_coeffs.template.h\n\n/**\n * Haar wavelet scaling numbers.\n */\nexport const HaarWavelet: ReadonlyArray<number> = [\n  1 / Math.SQRT2,\n  1 / Math.SQRT2\n];\n\n/**\n * Daubechies 2 scaling numbers.\n */\nexport const Db2Wavelet: ReadonlyArray<number> = [\n  (1 + Math.sqrt(3)) / (4 * Math.SQRT2),\n  (3 + Math.sqrt(3)) / (4 * Math.SQRT2),\n  (3 - Math.sqrt(3)) / (4 * Math.SQRT2),\n  (1 - Math.sqrt(3)) / (4 * Math.SQRT2)\n];\n\n/**\n * Daubechies 3 scaling numbers.\n */\nexport const Db3Wavelet: ReadonlyArray<number> = [\n  3.326705529500826159985115891390056300129233992450683597084705e-01,\n  8.068915093110925764944936040887134905192973949948236181650920e-01,\n  4.598775021184915700951519421476167208081101774314923066433867e-01,\n  -1.350110200102545886963899066993744805622198452237811919756862e-01,\n  -8.544127388202666169281916918177331153619763898808662976351748e-02,\n  3.522629188570953660274066471551002932775838791743161039893406e-02\n];\n\n/**\n * Daubechies 4 scaling numbers.\n */\nexport const Db4Wavelet: ReadonlyArray<number> = [\n  2.303778133088965008632911830440708500016152482483092977910968e-01,\n  7.148465705529156470899219552739926037076084010993081758450110e-01,\n  6.308807679298589078817163383006152202032229226771951174057473e-01,\n  -2.798376941685985421141374718007538541198732022449175284003358e-02,\n  -1.870348117190930840795706727890814195845441743745800912057770e-01,\n  3.084138183556076362721936253495905017031482172003403341821219e-02,\n  3.288301166688519973540751354924438866454194113754971259727278e-02,\n  -1.059740178506903210488320852402722918109996490637641983484974e-02\n];\n\n/**\n * Daubechies 5 scaling numbers.\n */\nexport const Db5Wavelet: ReadonlyArray<number> = [\n  1.601023979741929144807237480204207336505441246250578327725699e-01,\n  6.038292697971896705401193065250621075074221631016986987969283e-01,\n  7.243085284377729277280712441022186407687562182320073725767335e-01,\n  1.384281459013207315053971463390246973141057911739561022694652e-01,\n  -2.422948870663820318625713794746163619914908080626185983913726e-01,\n  -3.224486958463837464847975506213492831356498416379847225434268e-02,\n  7.757149384004571352313048938860181980623099452012527983210146e-02,\n  -6.241490212798274274190519112920192970763557165687607323417435e-03,\n  -1.258075199908199946850973993177579294920459162609785020169232e-02,\n  3.335725285473771277998183415817355747636524742305315099706428e-03\n];\n\n/**\n * Daubechies 6 scaling numbers.\n */\nexport const Db6Wavelet: ReadonlyArray<number> = [\n  1.115407433501094636213239172409234390425395919844216759082360e-01,\n  4.946238903984530856772041768778555886377863828962743623531834e-01,\n  7.511339080210953506789344984397316855802547833382612009730420e-01,\n  3.152503517091976290859896548109263966495199235172945244404163e-01,\n  -2.262646939654398200763145006609034656705401539728969940143487e-01,\n  -1.297668675672619355622896058765854608452337492235814701599310e-01,\n  9.750160558732304910234355253812534233983074749525514279893193e-02,\n  2.752286553030572862554083950419321365738758783043454321494202e-02,\n  -3.158203931748602956507908069984866905747953237314842337511464e-02,\n  5.538422011614961392519183980465012206110262773864964295476524e-04,\n  4.777257510945510639635975246820707050230501216581434297593254e-03,\n  -1.077301085308479564852621609587200035235233609334419689818580e-03\n];\n\n/**\n * Daubechies 7 scaling numbers.\n */\nexport const Db7Wavelet: ReadonlyArray<number> = [\n  7.785205408500917901996352195789374837918305292795568438702937e-02,\n  3.965393194819173065390003909368428563587151149333287401110499e-01,\n  7.291320908462351199169430703392820517179660611901363782697715e-01,\n  4.697822874051931224715911609744517386817913056787359532392529e-01,\n  -1.439060039285649754050683622130460017952735705499084834401753e-01,\n  -2.240361849938749826381404202332509644757830896773246552665095e-01,\n  7.130921926683026475087657050112904822711327451412314659575113e-02,\n  8.061260915108307191292248035938190585823820965629489058139218e-02,\n  -3.802993693501441357959206160185803585446196938467869898283122e-02,\n  -1.657454163066688065410767489170265479204504394820713705239272e-02,\n  1.255099855609984061298988603418777957289474046048710038411818e-02,\n  4.295779729213665211321291228197322228235350396942409742946366e-04,\n  -1.801640704047490915268262912739550962585651469641090625323864e-03,\n  3.537137999745202484462958363064254310959060059520040012524275e-04\n];\n\n/**\n * Daubechies 8 scaling numbers.\n */\nexport const Db8Wavelet: ReadonlyArray<number> = [\n  5.441584224310400995500940520299935503599554294733050397729280e-02,\n  3.128715909142999706591623755057177219497319740370229185698712e-01,\n  6.756307362972898068078007670471831499869115906336364227766759e-01,\n  5.853546836542067127712655200450981944303266678053369055707175e-01,\n  -1.582910525634930566738054787646630415774471154502826559735335e-02,\n  -2.840155429615469265162031323741647324684350124871451793599204e-01,\n  4.724845739132827703605900098258949861948011288770074644084096e-04,\n  1.287474266204784588570292875097083843022601575556488795577000e-01,\n  -1.736930100180754616961614886809598311413086529488394316977315e-02,\n  -4.408825393079475150676372323896350189751839190110996472750391e-02,\n  1.398102791739828164872293057263345144239559532934347169146368e-02,\n  8.746094047405776716382743246475640180402147081140676742686747e-03,\n  -4.870352993451574310422181557109824016634978512157003764736208e-03,\n  -3.917403733769470462980803573237762675229350073890493724492694e-04,\n  6.754494064505693663695475738792991218489630013558432103617077e-04,\n  -1.174767841247695337306282316988909444086693950311503927620013e-04\n];\n\n/**\n * Daubechies 9 scaling numbers.\n */\nexport const Db9Wavelet: ReadonlyArray<number> = [\n  3.807794736387834658869765887955118448771714496278417476647192e-02,\n  2.438346746125903537320415816492844155263611085609231361429088e-01,\n  6.048231236901111119030768674342361708959562711896117565333713e-01,\n  6.572880780513005380782126390451732140305858669245918854436034e-01,\n  1.331973858250075761909549458997955536921780768433661136154346e-01,\n  -2.932737832791749088064031952421987310438961628589906825725112e-01,\n  -9.684078322297646051350813353769660224825458104599099679471267e-02,\n  1.485407493381063801350727175060423024791258577280603060771649e-01,\n  3.072568147933337921231740072037882714105805024670744781503060e-02,\n  -6.763282906132997367564227482971901592578790871353739900748331e-02,\n  2.509471148314519575871897499885543315176271993709633321834164e-04,\n  2.236166212367909720537378270269095241855646688308853754721816e-02,\n  -4.723204757751397277925707848242465405729514912627938018758526e-03,\n  -4.281503682463429834496795002314531876481181811463288374860455e-03,\n  1.847646883056226476619129491125677051121081359600318160732515e-03,\n  2.303857635231959672052163928245421692940662052463711972260006e-04,\n  -2.519631889427101369749886842878606607282181543478028214134265e-04,\n  3.934732031627159948068988306589150707782477055517013507359938e-05\n];\n\n/**\n * Daubechies 10 scaling numbers.\n */\nexport const Db10Wavelet: ReadonlyArray<number> = [\n  2.667005790055555358661744877130858277192498290851289932779975e-02,\n  1.881768000776914890208929736790939942702546758640393484348595e-01,\n  5.272011889317255864817448279595081924981402680840223445318549e-01,\n  6.884590394536035657418717825492358539771364042407339537279681e-01,\n  2.811723436605774607487269984455892876243888859026150413831543e-01,\n  -2.498464243273153794161018979207791000564669737132073715013121e-01,\n  -1.959462743773770435042992543190981318766776476382778474396781e-01,\n  1.273693403357932600826772332014009770786177480422245995563097e-01,\n  9.305736460357235116035228983545273226942917998946925868063974e-02,\n  -7.139414716639708714533609307605064767292611983702150917523756e-02,\n  -2.945753682187581285828323760141839199388200516064948779769654e-02,\n  3.321267405934100173976365318215912897978337413267096043323351e-02,\n  3.606553566956169655423291417133403299517350518618994762730612e-03,\n  -1.073317548333057504431811410651364448111548781143923213370333e-02,\n  1.395351747052901165789318447957707567660542855688552426721117e-03,\n  1.992405295185056117158742242640643211762555365514105280067936e-03,\n  -6.858566949597116265613709819265714196625043336786920516211903e-04,\n  -1.164668551292854509514809710258991891527461854347597362819235e-04,\n  9.358867032006959133405013034222854399688456215297276443521873e-05,\n  -1.326420289452124481243667531226683305749240960605829756400674e-05\n];\n","export * from './daubechies/daubechies';\n\nimport {\n  Db2Wavelet,\n  Db3Wavelet,\n  Db4Wavelet,\n  Db5Wavelet,\n  Db6Wavelet,\n  Db7Wavelet,\n  Db8Wavelet,\n  Db9Wavelet,\n  Db10Wavelet,\n  HaarWavelet,\n} from './daubechies/daubechies';\n\n/**\n * Filters for a transform.\n */\nexport interface Filters {\n  \n  /**\n   * High-pass filter.\n   */\n  high: number[];\n\n  /**\n   * Low-pass filter.\n   */\n  low: number[];\n};\n\n/**\n * A wavelet, which can either be described by a wavelet basis or a wavelet\n * type.\n */\nexport type Wavelet = WaveletBasis | WaveletType;\n\n/**\n * A wavelet basis.\n */\nexport interface WaveletBasis {\n\n  /**\n   * Decomposition filters.\n   */\n  dec: Filters;\n\n  /**\n   * Reconstruction filters.\n   */\n  rec: Filters;\n}\n\n/**\n * Mapping of wavelet type keys to scaling numbers.\n */\nexport const ScalingNumbers: { [key: string]: ReadonlyArray<number> } = {\n  'db1': HaarWavelet,\n  'db2': Db2Wavelet,\n  'db3': Db3Wavelet,\n  'db4': Db4Wavelet,\n  'db5': Db5Wavelet,\n  'db6': Db6Wavelet,\n  'db7': Db7Wavelet,\n  'db8': Db8Wavelet,\n  'db9': Db9Wavelet,\n  'db10': Db10Wavelet,\n  'D2': HaarWavelet,\n  'D4': Db2Wavelet,\n  'D6': Db3Wavelet,\n  'D8': Db4Wavelet,\n  'D10': Db5Wavelet,\n  'D12': Db6Wavelet,\n  'D14': Db7Wavelet,\n  'D16': Db8Wavelet,\n  'D18': Db9Wavelet,\n  'D20': Db10Wavelet,\n  'haar': HaarWavelet,\n};\n\n/**\n * Short forms for common wavelet bases.\n */\nexport type WaveletType =\n      'db1'  | 'D2'  | 'haar'\n    | 'db2'  | 'D4'\n    | 'db3'  | 'D6'\n    | 'db4'  | 'D8'\n    | 'db5'  | 'D10'\n    | 'db6'  | 'D12'\n    | 'db7'  | 'D14'\n    | 'db8'  | 'D16'\n    | 'db9'  | 'D18'\n    | 'db10' | 'D20';\n","import {\n  PaddingMode,\n  PaddingWidths,\n} from \"./wt\";\nimport {\n  antisymmetricPadding,\n  constantPadding,\n  PADDING_MODES,\n  periodicPadding,\n  reflectPadding,\n  smoothPadding,\n  symmetricPadding,\n  zeroPadding,\n} from \"./padding/padding\";\nimport {\n  Filters,\n  ScalingNumbers,\n  Wavelet,\n  WaveletBasis,\n} from \"./wavelets/wavelets\";\n\n/**\n * Calculates the element-wise sum of two arrays.\n * \n * @param  a First array.\n * @param  b Second array.\n * @return   Element-wise sum.\n */\nexport function add(\n  a: ReadonlyArray<number>,\n  b: ReadonlyArray<number>,\n): number[] {\n  /* Check for same length of arrays. */\n  if (a.length !== b.length) {\n    throw new Error('Both arrays have to have the same length.');\n  }\n\n  /* Calculate element-wise sum. */\n  return a.map((value, index) => value + b[index]);\n}\n\n/**\n * Asserts if approximation and detail coefficients are valid or throws an\n * error if they are invalid. \n * \n * @param  approx Approximation coefficients.\n * @param  detail Detail coefficients.\n * @return        True if the coefficients are valid, otherwise throws an error.\n */\nexport function assertValidApproxDetail(\n  approx: ReadonlyArray<number>,\n  detail: ReadonlyArray<number>,\n): boolean {\n  /* Check if coefficients have equal length. */\n  if (approx.length !== detail.length) {\n    throw new Error('Approximation and detail coefficients must have equal length.');\n  }\n\n  /* Check for coefficients of zero length. */\n  if (approx.length === 0) {\n    throw new Error('Approximation and detail coefficients must not have zero length.');\n  }\n\n  return true;\n}\n\n/**\n * Asserts if coefficients are valid or throws an error if they are invalid.\n * \n * @param  coeffs Coefficients to test.\n * @return        True if the coefficients are valid, otherwise throws an error.\n */\nexport function assertValidCoeffs(\n  coeffs: ReadonlyArray<ReadonlyArray<number>>,\n): boolean {\n  /* Check if at least an array of approximation coefficients is given. */\n  if (coeffs.length < 1) {\n    throw new Error(\n      'Invalid coefficients. Array length must not be zero.'\n    );\n  }\n\n  return true;\n}\n\n/**\n * Asserts if wavelet filters are valid or throws an error if they are invalid.\n * \n * @param  filters Wavelet filters to test.\n * @return         True if the wavelet filters are valid, otherwise throws an error.\n */\nexport function assertValidFilters(\n  filters: Readonly<Filters>,\n): boolean {\n  /* Check if high-pass and low-pass filters have equal length. */\n  if (filters.high.length !== filters.low.length) {\n    throw new Error('High-pass and low-pass filters have to have equal length.');\n  }\n\n  /* Check if filter length is larger than or equal to two. */\n  if (filters.low.length < 2) {\n    throw new Error('Wavelet filter length has to be larger than or equal to two.');\n  }\n\n  return true;\n}\n\n/**\n * Determines a wavelet basis from a wavelet type or basis.\n * \n * @param  wavelet Wavelet type or basis.\n * @return         Wavelet basis.\n */\nexport function basisFromWavelet(wavelet: Readonly<Wavelet>): WaveletBasis {\n  return (typeof wavelet !== 'string')\n    ? wavelet\n    : waveletFromScalingNumbers(ScalingNumbers[wavelet]); \n}\n\n/**\n * Creates an array and populates it.\n * \n * @param  length   Length of the array.\n * @param  populate Function to populate the array.\n * @return          Populated array with specified length.\n */\nexport function createArray(\n  length: number,\n  populate: number | ((index: number) => number) = 0,\n): number[] {\n  /* Check for non-integer length. */\n  if (!Number.isInteger(length)) {\n    throw new Error('Length has to be an integer.');\n  }\n\n  /* Check for length less than zero. */\n  if (length < 0) {\n    throw new Error('Length must not be smaller than zero.')\n  }\n\n  /* Create and populate array. */\n  return Array.apply(null, Array(length)).map((_, index) =>\n    (typeof populate === 'function')\n      ? populate(index)\n      : populate\n  );\n}\n\n/**\n * Calculates the dot product of two arrays.\n * \n * @param  a First array.\n * @param  b Second array.\n * @return   Dot product.\n */\nexport function dot(\n  a: ReadonlyArray<number>,\n  b: ReadonlyArray<number>,\n): number {\n  /* Check for same length of arrays. */\n  if (a.length !== b.length) {\n    throw new Error('Both arrays have to have the same length.');\n  }\n\n  /* Calculate dot product. */\n  return a.reduce((dot, value, index) => dot + value * b[index], 0);\n}\n\n/**\n * Multiplies an array with a scalar value.\n * \n * @param  scalar Scalar value.\n * @param  array  Array of numbers.\n * @return        Array multiplied with scalar value.\n */\nexport function mulScalar(\n  scalar: number,\n  array: ReadonlyArray<number>,\n): number[] {\n  return array.map(value => scalar * value);\n}\n\n/**\n * Returns a single padding element.\n * \n * @param  data    Input data.\n * @param  index   Index of padding element.\n * @param  inverse True if the padding direction is inversed.\n * @param  mode    Signal extension mode.\n * @return         Single padding element.\n */\nexport function padElement(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean,\n  mode: PaddingMode,\n): number {\n  switch (mode) {\n    case PADDING_MODES.antisymmetric:\n      return antisymmetricPadding(data, index, inverse);\n    case PADDING_MODES.constant:\n      return constantPadding(data, inverse);\n    case PADDING_MODES.periodic:\n      return periodicPadding(data, index, inverse);\n    case PADDING_MODES.reflect:\n      return reflectPadding(data, index, inverse);\n    case PADDING_MODES.smooth:\n      return smoothPadding(data, index, inverse);\n    case PADDING_MODES.symmetric:\n      return symmetricPadding(data, index, inverse);\n    case PADDING_MODES.zero:\n      return zeroPadding();\n    default:\n      throw new Error('Unknown signal extension mode: \"' + mode + '\"');\n  }\n}\n\n/**\n * Determines the padding widths.\n * \n * @param  dataLength   Length of signal.\n * @param  filterLength Length of filter.\n * @return              Padding widths.\n */\nexport function padWidths(\n  dataLength: number,\n  filterLength: number,\n): PaddingWidths {\n  /* Check for valid data length. */\n  if (dataLength <= 0) {\n    throw new Error('Cannot determine padding widths for data of length less than or equal to zero.');\n  }\n\n  /* Check for valid filter length. */\n  if (filterLength < 2) {\n    throw new Error('Cannot determine padding widths for filter of length less than two.');\n  }\n\n  /* Determine padding widths. */\n  return [\n    filterLength - 2,\n    ((dataLength + filterLength) % 2 === 0)\n      ? filterLength - 2\n      : filterLength - 1\n  ];\n}\n\n/**\n * Determines a wavelet basis from scaling numbers.\n * \n * @param  scalingNumbers Wavelet scaling numbers.\n * @return                Wavelet basis.\n */\nexport function waveletFromScalingNumbers(\n  scalingNumbers: ReadonlyArray<number>,\n): WaveletBasis {\n  /* Check if length is larger than or equal to two. */\n  if (scalingNumbers.length < 2) {\n    throw new Error(\n      'Scaling numbers length has to be larger than or equal to two.'\n    );\n  }\n\n  /* Determine wavelet numbers. */\n  const waveletNumbers: ReadonlyArray<number> =\n      scalingNumbers.slice() // Copy array\n      .reverse()\n      .map((value, index) => (index % 2 === 0) ? value : -value);\n  \n  /* Determine wavelet basis. */\n  return {\n    dec: {\n      low: scalingNumbers.slice(),\n      high: waveletNumbers.slice(),\n    },\n    rec: {\n      low: scalingNumbers.slice(),\n      high: waveletNumbers.slice()\n    },\n  };\n}\n","export {\n  PaddingMode,\n  PaddingModes,\n  PaddingWidths,\n} from './padding/padding';\n\nexport {\n  Filters,\n  Wavelet,\n  WaveletBasis,\n  WaveletType,\n} from './wavelets/wavelets';\n\nimport {\n  add,\n  assertValidApproxDetail,\n  assertValidCoeffs,\n  assertValidFilters,\n  basisFromWavelet,\n  createArray,\n  dot,\n  mulScalar,\n  padElement,\n  padWidths,\n} from './helpers';\n\nimport {\n  PADDING_MODES,\n  PaddingMode,\n  PaddingModes,\n  PaddingWidths,\n} from './padding/padding';\n\nimport {\n  Filters,\n  Wavelet,\n  WaveletBasis,\n} from \"./wavelets/wavelets\";\n\n/**\n * Default padding mode to use.\n */\nconst DEFAULT_PADDING_MODE: PaddingMode = PADDING_MODES.symmetric;\n\n/**\n * Collection of methods for Discrete Wavelet Transform (DWT).\n */\nexport default class DiscreteWavelets {\n  /**\n   * Contains static information about the signal extension modes.\n   */\n  static readonly Modes: Readonly<PaddingModes> = PADDING_MODES;\n\n  /**\n   * Single level Discrete Wavelet Transform.\n   *\n   * @param  data    Input data.\n   * @param  wavelet Wavelet to use.\n   * @param  mode    Signal extension mode.\n   * @return         Approximation and detail coefficients as result of the transform.\n   */\n  static dwt(\n    data: ReadonlyArray<number>,\n    wavelet: Readonly<Wavelet>,\n    mode: PaddingMode = DEFAULT_PADDING_MODE\n  ): number[][] {\n    /* Determine wavelet basis and filters. */\n    const waveletBasis: Readonly<WaveletBasis> = basisFromWavelet(wavelet);\n    const filters: Readonly<Filters> = waveletBasis.dec;\n    assertValidFilters(filters);\n    const filterLength: number = filters.low.length;\n\n    /* Add padding. */\n    data = this.pad(data, padWidths(data.length, filterLength), mode);\n\n    /* Initialize approximation and detail coefficients. */\n    let approx: number[] = [];\n    let detail: number[] = [];\n\n    /* Calculate coefficients. */\n    for (let offset: number = 0; offset + filterLength <= data.length; offset += 2) {\n      /* Determine slice of values. */\n      const values: ReadonlyArray<number> = data.slice(offset, offset + filterLength);\n\n      /* Calculate approximation coefficients. */\n      approx.push(dot(values, filters.low));\n\n      /* Calculate detail coefficients. */\n      detail.push(dot(values, filters.high));\n    }\n\n    /* Return approximation and detail coefficients. */\n    return [approx, detail];\n  }\n\n  /**\n   * Calculates the energy as sum of squares of an array of data or\n   * coefficients.\n   *\n   * @param  values Array of data or coefficients.\n   * @return        Energy of values as the sum of squares.\n   */\n  static energy(values: ReadonlyArray<number> | ReadonlyArray<ReadonlyArray<number>>): number {\n    let energy: number = 0;\n    for (const value of values) {\n      if (typeof value === \"number\") energy += Math.pow(value, 2);\n      else energy += this.energy(value);\n    }\n    return energy;\n  }\n\n  /**\n   * Single level inverse Discrete Wavelet Transform.\n   *\n   * @param  approx  Approximation coefficients. If undefined, it will be set to an array of zeros with length equal to the detail coefficients.\n   * @param  detail  Detail coefficients. If undefined, it will be set to an array of zeros with length equal to the approximation coefficients.\n   * @param  wavelet Wavelet to use.\n   * @return         Approximation coefficients of previous level of transform.\n   */\n  static idwt(\n    approx: ReadonlyArray<number> | undefined,\n    detail: ReadonlyArray<number> | undefined,\n    wavelet: Wavelet\n  ): number[] {\n    /* Fill empty array with zeros. */\n    if (approx === undefined && detail !== undefined) {\n      approx = createArray(detail.length, 0);\n    }\n    if (detail === undefined && approx !== undefined) {\n      detail = createArray(approx.length, 0);\n    }\n\n    /* Check if some coefficients are undefined. */\n    if (approx === undefined || detail === undefined) {\n      throw new Error(\"Coefficients must not be undefined.\");\n    }\n\n    assertValidApproxDetail(approx, detail);\n\n    /* Determine wavelet basis and filters. */\n    const waveletBasis: Readonly<WaveletBasis> = basisFromWavelet(wavelet);\n    const filters: Readonly<Filters> = waveletBasis.rec;\n    assertValidFilters(filters);\n    const filterLength: number = filters.low.length;\n\n    /* Initialize transform. */\n    const coeffLength: number = approx.length;\n    let pad: ReadonlyArray<number> = createArray(filterLength + (coeffLength - 1) * 2, 0);\n\n    /* Perform inverse Discrete Wavelet Transform. */\n    for (let i = 0; i < coeffLength; i++) {\n      const offset: number = 2 * i;\n\n      /* Calculate values. */\n      let values: ReadonlyArray<number> = pad.slice(offset, offset + filterLength);\n      values = add(values, mulScalar(approx[i], filters.low));\n      values = add(values, mulScalar(detail[i], filters.high));\n\n      /* Update values. */\n      pad = pad\n        .slice(0, offset)\n        .concat(values)\n        .concat(pad.slice(offset + values.length));\n    }\n\n    /* Remove padding. */\n    return pad.slice(filterLength - 2, pad.length - (filterLength - 2));\n  }\n\n  /**\n   * Determines the maximum level of useful decomposition.\n   *\n   * @param  dataLength Length of input data.\n   * @param  wavelet    Wavelet to use.\n   * @return            Maximum useful level of decomposition.\n   */\n  static maxLevel(dataLength: number, wavelet: Readonly<Wavelet>): number {\n    /* Check for non-integer length. */\n    if (!Number.isInteger(dataLength)) {\n      throw new Error(\"Length of data is not an integer. This is not allowed.\");\n    }\n\n    /* Check for invalid input. */\n    if (dataLength < 0) {\n      throw new Error(\"Data length cannot be less than zero.\");\n    }\n\n    /* Return zero for data of zero length. */\n    if (dataLength === 0) return 0;\n\n    /* Determine wavelet basis. */\n    const waveletBasis: Readonly<WaveletBasis> = basisFromWavelet(wavelet);\n\n    /* Determine length of filter. */\n    const filterLength: number = waveletBasis.dec.low.length;\n\n    // SOURCE: https://pywavelets.readthedocs.io/en/latest/ref/dwt-discrete-wavelet-transform.html#maximum-decomposition-level-dwt-max-level-dwtn-max-level\n    return Math.max(0, Math.floor(Math.log2(dataLength / (filterLength - 1))));\n  }\n\n  /**\n   * Extends a signal with a given padding mode.\n   *\n   * @param  data      Input data.\n   * @param  padWidths Widths of padding at front and back.\n   * @param  mode      Signal extension mode.\n   * @return           Data with padding.\n   */\n  static pad(\n    data: ReadonlyArray<number>,\n    padWidths: Readonly<PaddingWidths>,\n    mode: PaddingMode\n  ): number[] {\n    /* Check for undefined data. */\n    if (!data) {\n      throw new Error(\"Cannot add padding to empty data.\");\n    }\n\n    /* Initialize. */\n    const front: number = padWidths[0];\n    const back: number = padWidths[1];\n\n    /* Add padding. */\n    return createArray(front, (index) => padElement(data, front - 1 - index, true, mode))\n      .concat(data)\n      .concat(createArray(back, (index) => padElement(data, index, false, mode)));\n  }\n\n  /**\n   * 1D wavelet decomposition. Transforms data by calculating coefficients from\n   * input data.\n   *\n   * @param  data    Input data.\n   * @param  wavelet Wavelet to use.\n   * @param  mode    Signal extension mode.\n   * @param  level   Decomposition level. Defaults to level calculated by maxLevel function.\n   * @return         Coefficients as result of the transform.\n   */\n  static wavedec(\n    data: ReadonlyArray<number>,\n    wavelet: Readonly<Wavelet>,\n    mode: PaddingMode = DEFAULT_PADDING_MODE,\n    level?: number\n  ): number[][] {\n    /* Determine decomposition level. */\n    if (level === undefined) level = this.maxLevel(data.length, wavelet);\n    if (level < 0) {\n      throw new Error(\"Decomposition level must not be less than zero\");\n    }\n\n    /*  Initialize transform. */\n    let coeffs: number[][] = [];\n    let approx: ReadonlyArray<number> = data.slice();\n\n    /* Transform. */\n    for (let l: number = 1; l <= level; l++) {\n      /* Perform single level transform. */\n      const approxDetail: ReadonlyArray<ReadonlyArray<number>> = this.dwt(approx, wavelet, mode);\n      approx = approxDetail[0];\n      const detail: ReadonlyArray<number> = approxDetail[1];\n\n      /* Prepend detail coefficients. */\n      coeffs.unshift(detail.slice());\n    }\n\n    /* Prepend last approximation. */\n    coeffs.unshift(approx.slice());\n\n    /* Return coefficients. */\n    return coeffs;\n  }\n\n  /**\n   * 1D wavelet reconstruction. Inverses a transform by calculating input data\n   * from coefficients.\n   *\n   * @param  coeffs  Coefficients as result of a transform.\n   * @param  wavelet Wavelet to use.\n   * @return         Input data as result of the inverse transform.\n   */\n  static waverec(coeffs: ReadonlyArray<ReadonlyArray<number>>, wavelet: Wavelet): number[] {\n    /* Check if coefficients are valid. */\n    assertValidCoeffs(coeffs);\n\n    /* Determine wavelet. */\n    wavelet = basisFromWavelet(wavelet);\n\n    /* Initialize transform. */\n    let approx: ReadonlyArray<number> = coeffs[0];\n\n    /* Transform. */\n    for (let i: number = 1; i < coeffs.length; i++) {\n      /* Initialize detail coefficients. */\n      const detail: ReadonlyArray<number> = coeffs[i];\n\n      // TODO: Check if problem of different coefficient lengths because of padding can be solved in a more elegant way.\n      if (approx.length === detail.length + 1) {\n        approx = approx.slice(0, approx.length - 1);\n      }\n\n      /* Calculate previous level of approximation. */\n      approx = this.idwt(approx, detail, wavelet);\n    }\n\n    /* Return data. */\n    return approx.slice();\n  }\n}\n"],"names":[],"mappings":"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"}