{"version":3,"file":"discrete-wavelets.es5.js","sources":["../src/padding/symmetric/symmetric.ts","../src/padding/antisymmetric/antisymmetric.ts","../src/padding/constant/constant.ts","../src/padding/periodic/periodic.ts","../src/padding/reflect/reflect.ts","../src/padding/smooth/smooth.ts","../src/padding/zero/zero.ts","../src/padding/padding.ts","../src/wavelets/daubechies/daubechies.ts","../src/wavelets/wavelets.ts","../src/helpers.ts","../src/wt.ts"],"sourcesContent":["import { PaddingMode } from '../padding';\n\n/**\n * Symmetric padding.\n */\nexport const SYMMETRIC_PADDING: PaddingMode = 'symmetric';\n\n/**\n * Returns a single value of symmetric padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function symmetricPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error(\n      'Cannot determine symmetric padding for data of zero length.'\n    );\n  }\n\n  /* Determine symmetric padding. */\n  const dirChanges: number = Math.floor(index / data.length);\n  const inversions: number = (inverse) ? dirChanges : dirChanges + 1;\n  return (inversions % 2 === 0)\n    ? data[index % data.length]\n    : data[data.length - 1 - (index % data.length)];\n};\n","import { PaddingMode } from '../padding';\nimport { symmetricPadding } from '../symmetric/symmetric';\n\n/**\n * Antisymmetric padding.\n */\nexport const ANTISYMMETRIC_PADDING: PaddingMode = 'antisymmetric';\n\n/**\n * Returns a single value of antisymmetric padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function antisymmetricPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  const dirChanges: number = Math.floor(index / data.length);\n  const sign: number = (dirChanges % 2 === 0) ? -1 : 1;\n  return sign * symmetricPadding(data, index, inverse);\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Constant padding.\n */\nexport const CONSTANT_PADDING: PaddingMode = 'constant';\n\n/**\n * Returns a single value of constant padding.\n * \n * @param  data    Input values.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function constantPadding(\n  data: ReadonlyArray<number>,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error(\n      'Cannot determine constant padding for data of zero length.'\n    );\n  }\n\n  /* Determine constant padding. */\n  return (!inverse)\n    ? data[data.length - 1]\n    : data[0];\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Periodic padding.\n */\nexport const PERIODIC_PADDING: PaddingMode = 'periodic';\n\n/**\n * Returns a single value of periodic padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function periodicPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error(\n      'Cannot determine periodic padding for data of zero length.'\n    );\n  }\n\n  /* Determine periodic padding. */\n  return (!inverse)\n    ? data[index % data.length]\n    : data[data.length - 1 - (index % data.length)];\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Reflect padding.\n */\nexport const REFLECT_PADDING: PaddingMode = 'reflect';\n\n/**\n * Returns a single value of reflect padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function reflectPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error(\n      'Cannot determine reflect padding for data of zero length.'\n    );\n  }\n\n  /* Return constant value for data of length one. */\n  if (data.length === 1) return data[0];\n\n  /* Determine reflect padding. */\n  const dirChanges: number = Math.floor(index / (data.length - 1));\n  const inversions: number = (inverse) ? dirChanges : dirChanges + 1;\n  return (inversions % 2 === 0)\n    ? data[index % (data.length - 1) + 1]\n    : data[data.length - 2 - (index % (data.length - 1))];\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Smooth padding.\n */\nexport const SMOOTH_PADDING: PaddingMode = 'smooth';\n\n/**\n * Returns a single value of smooth padding.\n * \n * @param  data    Input values.\n * @param  index   Index of padding.\n * @param  inverse True if the direction should be inversed.\n * @return         Single padding value.\n */\nexport function smoothPadding(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean = false,\n): number {\n  /* Check if data has length larger than zero. */\n  if (data.length === 0) {\n    throw new Error('Cannot determine smooth padding for data of zero length.');\n  }\n\n  /* Determine line equation. */\n  const end: number = data.length - 1;\n  const offset: number = (inverse) ? data[0] : data[end];\n  const slope: number = (inverse)\n    ? (data.length === 1) ? data[0] : data[0] - data[1]\n    : (data.length === 1) ? -data[0] : data[end] - data[end - 1];\n  return offset + (index + 1) * slope;\n};\n","import { PaddingMode } from '../padding';\n\n/**\n * Zero padding.\n */\nexport const ZERO_PADDING: PaddingMode = 'zero';\n\n/**\n * Returns a single value of zero padding.\n * \n * @return         Single padding value.\n */\nexport function zeroPadding(): number {\n  return 0;\n};\n","export { antisymmetricPadding } from './antisymmetric/antisymmetric';\nexport { constantPadding } from './constant/constant';\nexport { periodicPadding } from './periodic/periodic';\nexport { reflectPadding } from './reflect/reflect';\nexport { smoothPadding } from './smooth/smooth';\nexport { symmetricPadding } from './symmetric/symmetric';\nexport { zeroPadding } from './zero/zero';\n\nimport { ANTISYMMETRIC_PADDING } from './antisymmetric/antisymmetric';\nimport { CONSTANT_PADDING } from './constant/constant';\nimport { PERIODIC_PADDING } from './periodic/periodic';\nimport { REFLECT_PADDING } from './reflect/reflect';\nimport { SMOOTH_PADDING } from './smooth/smooth';\nimport { SYMMETRIC_PADDING } from './symmetric/symmetric';\nimport { ZERO_PADDING } from './zero/zero';\n\n/**\n * Signal extension mode.\n */\nexport type PaddingMode =\n    'antisymmetric'\n    | 'constant'\n    | 'periodic'\n    | 'reflect'\n    | 'smooth'\n    | 'symmetric'\n    | 'zero';\n\n/**\n * Interface of supported padding mode.\n */\nexport interface PaddingModes {\n  antisymmetric: PaddingMode;\n  constant: PaddingMode;\n  modes: PaddingMode[];\n  periodic: PaddingMode;\n  reflect: PaddingMode;\n  smooth: PaddingMode;\n  symmetric: PaddingMode;\n  zero: PaddingMode;\n}\n\n/**\n * Supported signal extension modes.\n */\nexport const PADDING_MODES: Readonly<PaddingModes> = {\n  antisymmetric: ANTISYMMETRIC_PADDING,\n  constant: CONSTANT_PADDING,\n  periodic: PERIODIC_PADDING,\n  reflect: REFLECT_PADDING,\n  smooth: SMOOTH_PADDING,\n  symmetric: SYMMETRIC_PADDING,\n  zero: ZERO_PADDING,\n  modes: [\n    ZERO_PADDING,\n    CONSTANT_PADDING,\n    SYMMETRIC_PADDING,\n    PERIODIC_PADDING,\n    SMOOTH_PADDING,\n    REFLECT_PADDING,\n    ANTISYMMETRIC_PADDING,\n  ],\n};\n\n/**\n * Number of padded values at front and back.\n */\nexport type PaddingWidths = [number, number];\n","// SOURCE: https://github.com/PyWavelets/pywt/blob/master/pywt/_extensions/c/wavelets_coeffs.template.h\n\n/**\n * Haar wavelet scaling numbers.\n */\nexport const HaarWavelet: ReadonlyArray<number> = [\n  1 / Math.SQRT2,\n  1 / Math.SQRT2\n];\n\n/**\n * Daubechies 2 scaling numbers.\n */\nexport const Db2Wavelet: ReadonlyArray<number> = [\n  (1 + Math.sqrt(3)) / (4 * Math.SQRT2),\n  (3 + Math.sqrt(3)) / (4 * Math.SQRT2),\n  (3 - Math.sqrt(3)) / (4 * Math.SQRT2),\n  (1 - Math.sqrt(3)) / (4 * Math.SQRT2)\n];\n\n/**\n * Daubechies 3 scaling numbers.\n */\nexport const Db3Wavelet: ReadonlyArray<number> = [\n  3.326705529500826159985115891390056300129233992450683597084705e-01,\n  8.068915093110925764944936040887134905192973949948236181650920e-01,\n  4.598775021184915700951519421476167208081101774314923066433867e-01,\n  -1.350110200102545886963899066993744805622198452237811919756862e-01,\n  -8.544127388202666169281916918177331153619763898808662976351748e-02,\n  3.522629188570953660274066471551002932775838791743161039893406e-02\n];\n\n/**\n * Daubechies 4 scaling numbers.\n */\nexport const Db4Wavelet: ReadonlyArray<number> = [\n  2.303778133088965008632911830440708500016152482483092977910968e-01,\n  7.148465705529156470899219552739926037076084010993081758450110e-01,\n  6.308807679298589078817163383006152202032229226771951174057473e-01,\n  -2.798376941685985421141374718007538541198732022449175284003358e-02,\n  -1.870348117190930840795706727890814195845441743745800912057770e-01,\n  3.084138183556076362721936253495905017031482172003403341821219e-02,\n  3.288301166688519973540751354924438866454194113754971259727278e-02,\n  -1.059740178506903210488320852402722918109996490637641983484974e-02\n];\n\n/**\n * Daubechies 5 scaling numbers.\n */\nexport const Db5Wavelet: ReadonlyArray<number> = [\n  1.601023979741929144807237480204207336505441246250578327725699e-01,\n  6.038292697971896705401193065250621075074221631016986987969283e-01,\n  7.243085284377729277280712441022186407687562182320073725767335e-01,\n  1.384281459013207315053971463390246973141057911739561022694652e-01,\n  -2.422948870663820318625713794746163619914908080626185983913726e-01,\n  -3.224486958463837464847975506213492831356498416379847225434268e-02,\n  7.757149384004571352313048938860181980623099452012527983210146e-02,\n  -6.241490212798274274190519112920192970763557165687607323417435e-03,\n  -1.258075199908199946850973993177579294920459162609785020169232e-02,\n  3.335725285473771277998183415817355747636524742305315099706428e-03\n];\n\n/**\n * Daubechies 6 scaling numbers.\n */\nexport const Db6Wavelet: ReadonlyArray<number> = [\n  1.115407433501094636213239172409234390425395919844216759082360e-01,\n  4.946238903984530856772041768778555886377863828962743623531834e-01,\n  7.511339080210953506789344984397316855802547833382612009730420e-01,\n  3.152503517091976290859896548109263966495199235172945244404163e-01,\n  -2.262646939654398200763145006609034656705401539728969940143487e-01,\n  -1.297668675672619355622896058765854608452337492235814701599310e-01,\n  9.750160558732304910234355253812534233983074749525514279893193e-02,\n  2.752286553030572862554083950419321365738758783043454321494202e-02,\n  -3.158203931748602956507908069984866905747953237314842337511464e-02,\n  5.538422011614961392519183980465012206110262773864964295476524e-04,\n  4.777257510945510639635975246820707050230501216581434297593254e-03,\n  -1.077301085308479564852621609587200035235233609334419689818580e-03\n];\n\n/**\n * Daubechies 7 scaling numbers.\n */\nexport const Db7Wavelet: ReadonlyArray<number> = [\n  7.785205408500917901996352195789374837918305292795568438702937e-02,\n  3.965393194819173065390003909368428563587151149333287401110499e-01,\n  7.291320908462351199169430703392820517179660611901363782697715e-01,\n  4.697822874051931224715911609744517386817913056787359532392529e-01,\n  -1.439060039285649754050683622130460017952735705499084834401753e-01,\n  -2.240361849938749826381404202332509644757830896773246552665095e-01,\n  7.130921926683026475087657050112904822711327451412314659575113e-02,\n  8.061260915108307191292248035938190585823820965629489058139218e-02,\n  -3.802993693501441357959206160185803585446196938467869898283122e-02,\n  -1.657454163066688065410767489170265479204504394820713705239272e-02,\n  1.255099855609984061298988603418777957289474046048710038411818e-02,\n  4.295779729213665211321291228197322228235350396942409742946366e-04,\n  -1.801640704047490915268262912739550962585651469641090625323864e-03,\n  3.537137999745202484462958363064254310959060059520040012524275e-04\n];\n\n/**\n * Daubechies 8 scaling numbers.\n */\nexport const Db8Wavelet: ReadonlyArray<number> = [\n  5.441584224310400995500940520299935503599554294733050397729280e-02,\n  3.128715909142999706591623755057177219497319740370229185698712e-01,\n  6.756307362972898068078007670471831499869115906336364227766759e-01,\n  5.853546836542067127712655200450981944303266678053369055707175e-01,\n  -1.582910525634930566738054787646630415774471154502826559735335e-02,\n  -2.840155429615469265162031323741647324684350124871451793599204e-01,\n  4.724845739132827703605900098258949861948011288770074644084096e-04,\n  1.287474266204784588570292875097083843022601575556488795577000e-01,\n  -1.736930100180754616961614886809598311413086529488394316977315e-02,\n  -4.408825393079475150676372323896350189751839190110996472750391e-02,\n  1.398102791739828164872293057263345144239559532934347169146368e-02,\n  8.746094047405776716382743246475640180402147081140676742686747e-03,\n  -4.870352993451574310422181557109824016634978512157003764736208e-03,\n  -3.917403733769470462980803573237762675229350073890493724492694e-04,\n  6.754494064505693663695475738792991218489630013558432103617077e-04,\n  -1.174767841247695337306282316988909444086693950311503927620013e-04\n];\n\n/**\n * Daubechies 9 scaling numbers.\n */\nexport const Db9Wavelet: ReadonlyArray<number> = [\n  3.807794736387834658869765887955118448771714496278417476647192e-02,\n  2.438346746125903537320415816492844155263611085609231361429088e-01,\n  6.048231236901111119030768674342361708959562711896117565333713e-01,\n  6.572880780513005380782126390451732140305858669245918854436034e-01,\n  1.331973858250075761909549458997955536921780768433661136154346e-01,\n  -2.932737832791749088064031952421987310438961628589906825725112e-01,\n  -9.684078322297646051350813353769660224825458104599099679471267e-02,\n  1.485407493381063801350727175060423024791258577280603060771649e-01,\n  3.072568147933337921231740072037882714105805024670744781503060e-02,\n  -6.763282906132997367564227482971901592578790871353739900748331e-02,\n  2.509471148314519575871897499885543315176271993709633321834164e-04,\n  2.236166212367909720537378270269095241855646688308853754721816e-02,\n  -4.723204757751397277925707848242465405729514912627938018758526e-03,\n  -4.281503682463429834496795002314531876481181811463288374860455e-03,\n  1.847646883056226476619129491125677051121081359600318160732515e-03,\n  2.303857635231959672052163928245421692940662052463711972260006e-04,\n  -2.519631889427101369749886842878606607282181543478028214134265e-04,\n  3.934732031627159948068988306589150707782477055517013507359938e-05\n];\n\n/**\n * Daubechies 10 scaling numbers.\n */\nexport const Db10Wavelet: ReadonlyArray<number> = [\n  2.667005790055555358661744877130858277192498290851289932779975e-02,\n  1.881768000776914890208929736790939942702546758640393484348595e-01,\n  5.272011889317255864817448279595081924981402680840223445318549e-01,\n  6.884590394536035657418717825492358539771364042407339537279681e-01,\n  2.811723436605774607487269984455892876243888859026150413831543e-01,\n  -2.498464243273153794161018979207791000564669737132073715013121e-01,\n  -1.959462743773770435042992543190981318766776476382778474396781e-01,\n  1.273693403357932600826772332014009770786177480422245995563097e-01,\n  9.305736460357235116035228983545273226942917998946925868063974e-02,\n  -7.139414716639708714533609307605064767292611983702150917523756e-02,\n  -2.945753682187581285828323760141839199388200516064948779769654e-02,\n  3.321267405934100173976365318215912897978337413267096043323351e-02,\n  3.606553566956169655423291417133403299517350518618994762730612e-03,\n  -1.073317548333057504431811410651364448111548781143923213370333e-02,\n  1.395351747052901165789318447957707567660542855688552426721117e-03,\n  1.992405295185056117158742242640643211762555365514105280067936e-03,\n  -6.858566949597116265613709819265714196625043336786920516211903e-04,\n  -1.164668551292854509514809710258991891527461854347597362819235e-04,\n  9.358867032006959133405013034222854399688456215297276443521873e-05,\n  -1.326420289452124481243667531226683305749240960605829756400674e-05\n];\n","export * from './daubechies/daubechies';\n\nimport {\n  Db2Wavelet,\n  Db3Wavelet,\n  Db4Wavelet,\n  Db5Wavelet,\n  Db6Wavelet,\n  Db7Wavelet,\n  Db8Wavelet,\n  Db9Wavelet,\n  Db10Wavelet,\n  HaarWavelet,\n} from './daubechies/daubechies';\n\n/**\n * Filters for a transform.\n */\nexport interface Filters {\n  \n  /**\n   * High-pass filter.\n   */\n  high: number[];\n\n  /**\n   * Low-pass filter.\n   */\n  low: number[];\n};\n\n/**\n * A wavelet, which can either be described by a wavelet basis or a wavelet\n * type.\n */\nexport type Wavelet = WaveletBasis | WaveletType;\n\n/**\n * A wavelet basis.\n */\nexport interface WaveletBasis {\n\n  /**\n   * Decomposition filters.\n   */\n  dec: Filters;\n\n  /**\n   * Reconstruction filters.\n   */\n  rec: Filters;\n}\n\n/**\n * Mapping of wavelet type keys to scaling numbers.\n */\nexport const ScalingNumbers: { [key: string]: ReadonlyArray<number> } = {\n  'db1': HaarWavelet,\n  'db2': Db2Wavelet,\n  'db3': Db3Wavelet,\n  'db4': Db4Wavelet,\n  'db5': Db5Wavelet,\n  'db6': Db6Wavelet,\n  'db7': Db7Wavelet,\n  'db8': Db8Wavelet,\n  'db9': Db9Wavelet,\n  'db10': Db10Wavelet,\n  'D2': HaarWavelet,\n  'D4': Db2Wavelet,\n  'D6': Db3Wavelet,\n  'D8': Db4Wavelet,\n  'D10': Db5Wavelet,\n  'D12': Db6Wavelet,\n  'D14': Db7Wavelet,\n  'D16': Db8Wavelet,\n  'D18': Db9Wavelet,\n  'D20': Db10Wavelet,\n  'haar': HaarWavelet,\n};\n\n/**\n * Short forms for common wavelet bases.\n */\nexport type WaveletType =\n      'db1'  | 'D2'  | 'haar'\n    | 'db2'  | 'D4'\n    | 'db3'  | 'D6'\n    | 'db4'  | 'D8'\n    | 'db5'  | 'D10'\n    | 'db6'  | 'D12'\n    | 'db7'  | 'D14'\n    | 'db8'  | 'D16'\n    | 'db9'  | 'D18'\n    | 'db10' | 'D20';\n","import {\n  PaddingMode,\n  PaddingWidths,\n} from \"./wt\";\nimport {\n  antisymmetricPadding,\n  constantPadding,\n  PADDING_MODES,\n  periodicPadding,\n  reflectPadding,\n  smoothPadding,\n  symmetricPadding,\n  zeroPadding,\n} from \"./padding/padding\";\nimport {\n  Filters,\n  ScalingNumbers,\n  Wavelet,\n  WaveletBasis,\n} from \"./wavelets/wavelets\";\n\n/**\n * Calculates the element-wise sum of two arrays.\n * \n * @param  a First array.\n * @param  b Second array.\n * @return   Element-wise sum.\n */\nexport function add(\n  a: ReadonlyArray<number>,\n  b: ReadonlyArray<number>,\n): number[] {\n  /* Check for same length of arrays. */\n  if (a.length !== b.length) {\n    throw new Error('Both arrays have to have the same length.');\n  }\n\n  /* Calculate element-wise sum. */\n  return a.map((value, index) => value + b[index]);\n}\n\n/**\n * Asserts if approximation and detail coefficients are valid or throws an\n * error if they are invalid. \n * \n * @param  approx Approximation coefficients.\n * @param  detail Detail coefficients.\n * @return        True if the coefficients are valid, otherwise throws an error.\n */\nexport function assertValidApproxDetail(\n  approx: ReadonlyArray<number>,\n  detail: ReadonlyArray<number>,\n): boolean {\n  /* Check if coefficients have equal length. */\n  if (approx.length !== detail.length) {\n    throw new Error('Approximation and detail coefficients must have equal length.');\n  }\n\n  /* Check for coefficients of zero length. */\n  if (approx.length === 0) {\n    throw new Error('Approximation and detail coefficients must not have zero length.');\n  }\n\n  return true;\n}\n\n/**\n * Asserts if coefficients are valid or throws an error if they are invalid.\n * \n * @param  coeffs Coefficients to test.\n * @return        True if the coefficients are valid, otherwise throws an error.\n */\nexport function assertValidCoeffs(\n  coeffs: ReadonlyArray<ReadonlyArray<number>>,\n): boolean {\n  /* Check if at least an array of approximation coefficients is given. */\n  if (coeffs.length < 1) {\n    throw new Error(\n      'Invalid coefficients. Array length must not be zero.'\n    );\n  }\n\n  return true;\n}\n\n/**\n * Asserts if wavelet filters are valid or throws an error if they are invalid.\n * \n * @param  filters Wavelet filters to test.\n * @return         True if the wavelet filters are valid, otherwise throws an error.\n */\nexport function assertValidFilters(\n  filters: Readonly<Filters>,\n): boolean {\n  /* Check if high-pass and low-pass filters have equal length. */\n  if (filters.high.length !== filters.low.length) {\n    throw new Error('High-pass and low-pass filters have to have equal length.');\n  }\n\n  /* Check if filter length is larger than or equal to two. */\n  if (filters.low.length < 2) {\n    throw new Error('Wavelet filter length has to be larger than or equal to two.');\n  }\n\n  return true;\n}\n\n/**\n * Determines a wavelet basis from a wavelet type or basis.\n * \n * @param  wavelet Wavelet type or basis.\n * @return         Wavelet basis.\n */\nexport function basisFromWavelet(wavelet: Readonly<Wavelet>): WaveletBasis {\n  return (typeof wavelet !== 'string')\n    ? wavelet\n    : waveletFromScalingNumbers(ScalingNumbers[wavelet]); \n}\n\n/**\n * Creates an array and populates it.\n * \n * @param  length   Length of the array.\n * @param  populate Function to populate the array.\n * @return          Populated array with specified length.\n */\nexport function createArray(\n  length: number,\n  populate: number | ((index: number) => number) = 0,\n): number[] {\n  /* Check for non-integer length. */\n  if (!Number.isInteger(length)) {\n    throw new Error('Length has to be an integer.');\n  }\n\n  /* Check for length less than zero. */\n  if (length < 0) {\n    throw new Error('Length must not be smaller than zero.')\n  }\n\n  /* Create and populate array. */\n  return Array.apply(null, Array(length)).map((_, index) =>\n    (typeof populate === 'function')\n      ? populate(index)\n      : populate\n  );\n}\n\n/**\n * Calculates the dot product of two arrays.\n * \n * @param  a First array.\n * @param  b Second array.\n * @return   Dot product.\n */\nexport function dot(\n  a: ReadonlyArray<number>,\n  b: ReadonlyArray<number>,\n): number {\n  /* Check for same length of arrays. */\n  if (a.length !== b.length) {\n    throw new Error('Both arrays have to have the same length.');\n  }\n\n  /* Calculate dot product. */\n  return a.reduce((dot, value, index) => dot + value * b[index], 0);\n}\n\n/**\n * Multiplies an array with a scalar value.\n * \n * @param  scalar Scalar value.\n * @param  array  Array of numbers.\n * @return        Array multiplied with scalar value.\n */\nexport function mulScalar(\n  scalar: number,\n  array: ReadonlyArray<number>,\n): number[] {\n  return array.map(value => scalar * value);\n}\n\n/**\n * Returns a single padding element.\n * \n * @param  data    Input data.\n * @param  index   Index of padding element.\n * @param  inverse True if the padding direction is inversed.\n * @param  mode    Signal extension mode.\n * @return         Single padding element.\n */\nexport function padElement(\n  data: ReadonlyArray<number>,\n  index: number,\n  inverse: boolean,\n  mode: PaddingMode,\n): number {\n  switch (mode) {\n    case PADDING_MODES.antisymmetric:\n      return antisymmetricPadding(data, index, inverse);\n    case PADDING_MODES.constant:\n      return constantPadding(data, inverse);\n    case PADDING_MODES.periodic:\n      return periodicPadding(data, index, inverse);\n    case PADDING_MODES.reflect:\n      return reflectPadding(data, index, inverse);\n    case PADDING_MODES.smooth:\n      return smoothPadding(data, index, inverse);\n    case PADDING_MODES.symmetric:\n      return symmetricPadding(data, index, inverse);\n    case PADDING_MODES.zero:\n      return zeroPadding();\n    default:\n      throw new Error('Unknown signal extension mode: \"' + mode + '\"');\n  }\n}\n\n/**\n * Determines the padding widths.\n * \n * @param  dataLength   Length of signal.\n * @param  filterLength Length of filter.\n * @return              Padding widths.\n */\nexport function padWidths(\n  dataLength: number,\n  filterLength: number,\n): PaddingWidths {\n  /* Check for valid data length. */\n  if (dataLength <= 0) {\n    throw new Error('Cannot determine padding widths for data of length less than or equal to zero.');\n  }\n\n  /* Check for valid filter length. */\n  if (filterLength < 2) {\n    throw new Error('Cannot determine padding widths for filter of length less than two.');\n  }\n\n  /* Determine padding widths. */\n  return [\n    filterLength - 2,\n    ((dataLength + filterLength) % 2 === 0)\n      ? filterLength - 2\n      : filterLength - 1\n  ];\n}\n\n/**\n * Determines a wavelet basis from scaling numbers.\n * \n * @param  scalingNumbers Wavelet scaling numbers.\n * @return                Wavelet basis.\n */\nexport function waveletFromScalingNumbers(\n  scalingNumbers: ReadonlyArray<number>,\n): WaveletBasis {\n  /* Check if length is larger than or equal to two. */\n  if (scalingNumbers.length < 2) {\n    throw new Error(\n      'Scaling numbers length has to be larger than or equal to two.'\n    );\n  }\n\n  /* Determine wavelet numbers. */\n  const waveletNumbers: ReadonlyArray<number> =\n      scalingNumbers.slice() // Copy array\n      .reverse()\n      .map((value, index) => (index % 2 === 0) ? value : -value);\n  \n  /* Determine wavelet basis. */\n  return {\n    dec: {\n      low: scalingNumbers.slice(),\n      high: waveletNumbers.slice(),\n    },\n    rec: {\n      low: scalingNumbers.slice(),\n      high: waveletNumbers.slice()\n    },\n  };\n}\n","export {\n  PaddingMode,\n  PaddingModes,\n  PaddingWidths,\n} from './padding/padding';\n\nexport {\n  Filters,\n  Wavelet,\n  WaveletBasis,\n  WaveletType,\n} from './wavelets/wavelets';\n\nimport {\n  add,\n  assertValidApproxDetail,\n  assertValidCoeffs,\n  assertValidFilters,\n  basisFromWavelet,\n  createArray,\n  dot,\n  mulScalar,\n  padElement,\n  padWidths,\n} from './helpers';\n\nimport {\n  PADDING_MODES,\n  PaddingMode,\n  PaddingModes,\n  PaddingWidths,\n} from './padding/padding';\n\nimport {\n  Filters,\n  Wavelet,\n  WaveletBasis,\n} from \"./wavelets/wavelets\";\n\n/**\n * Default padding mode to use.\n */\nconst DEFAULT_PADDING_MODE: PaddingMode = PADDING_MODES.symmetric;\n\nexport namespace DiscreteWavelets {\n  export interface WaveletCoefficients2D {\n      approximation: number[][];  // This is the LL band\n      details: { \n          LH: number[][],\n          HL: number[][],\n          HH: number[][]\n      }[];  // Mind that this is an array of objects!\n      // Information of the original input size must be kept to reliably undo the padding in the last step of waverec2()\n      size: [number, number];\n      mask?: { // This will store an optional mask matrix of coefficients, where 0 means that that position on the transform\n              // result is a synthetic zero produced by the padding, and anything else means 'position with actual data'\n          approximation: number[][];\n          details: { \n              LH: number[][],\n              HL: number[][],\n              HH: number[][] \n          }[];  // Mind that this is an array of objects!\n      }\n  }\n\n  export interface WaveletBands2D {\n      LL: number[][],\n      LH: number[][],\n      HL: number[][],\n      HH: number[][],\n  }\n}\n\n/**\n * Collection of methods for Discrete Wavelet Transform (DWT).\n */\nexport default class DiscreteWavelets {\n  /**\n   * Contains static information about the signal extension modes.\n   */\n  static readonly Modes: Readonly<PaddingModes> = PADDING_MODES;\n\n\n\n\n/**\n *     2-D FUNCTIONS\n */\n\n  static maxLevel2(\n      size: [number, number], \n      wavelet: Wavelet,\n  ): number {\n      // !!! Assuming that the decimation factor is 2, it should be equal to:\n      // Math.floor(Math.log2(Math.min(rows, cols)))\n      return Math.min(\n          this.maxLevel(size[0], wavelet),\n          this.maxLevel(size[1], wavelet)\n      );\n  }\n\n  static dwtRows(\n      matrix: number[][], \n      wavelet: Wavelet, \n      paddingmode: PaddingMode,\n      taintAnalysisOnly: boolean = false,\n  ): {cA: number[][], cD: number[][]} {\n      const rows = matrix.length;\n      //const cols = matrix[0].length;\n\n      const cA: number[][] = [];\n      const cD: number[][] = [];\n\n      for (let r = 0; r < rows; r++) {\n          const [approx, detail] = this.dwt(matrix[r], wavelet, paddingmode, taintAnalysisOnly);  // approx.length = detail.length = padding + cols / 2\n          cA.push(approx);\n          cD.push(detail);\n      }\n      \n      return { cA, cD };  // cA.length = cD.length = rows\n  }\n\n  static dwtCols(\n      cA: number[][], \n      cD: number[][], \n      wavelet: Wavelet, \n      paddingmode: PaddingMode,\n      taintAnalysisOnly: boolean = false,\n  ): DiscreteWavelets.WaveletBands2D {\n      //const rows = cA.length;\n      const cols = cA[0].length;\n\n      // This initialization is necessary for later to be able to access bands.something; otherwise bands is undefined so that we cannot access sub-fields\n      let bands: DiscreteWavelets.WaveletBands2D = { LL: [], LH: [], HL: [], HH: [] };\n\n      for (let col = 0; col < cols; col++) {\n          const recA = cA.map(r => r[col]);\n          const [A1, D1] = this.dwt(recA, wavelet, paddingmode, taintAnalysisOnly);  // A1.length = D1.length = padding + cA.length / 2\n          const recD = cD.map(r => r[col]);\n          const [A2, D2] = this.dwt(recD, wavelet, paddingmode, taintAnalysisOnly);  // A2.length = D2.length = padding + cD.length / 2\n\n          // Initialize the bands as [][] on the first iteration, now that we know the result of WT.dwt() *with the padding*\n          if (col == 0) {\n              bands.LL = Array.from({ length: cols }, () => Array(A1.length).fill(0));  // A1.length = D1.length\n              bands.LH = Array.from({ length: cols }, () => Array(D1.length).fill(0));\n              bands.HL = Array.from({ length: cols }, () => Array(A2.length).fill(0));  // A2.length = D2.length\n              bands.HH = Array.from({ length: cols }, () => Array(D2.length).fill(0));\n          }\n\n          // assign column results for cA\n          for (let i = 0; i < A1.length; i++) {\n              bands.LL[col][i] = A1[i];\n              bands.LH[col][i] = D1[i];\n          }\n          // assign column results for cD\n          for (let i = 0; i < A2.length; i++) {\n              bands.HL[col][i] = A2[i];\n              bands.HH[col][i] = D2[i];\n          }\n      }\n\n      return bands;\n  }\n\n  static idwtRows(\n      cA: number[][], \n      cD: number[][], \n      wavelet: Wavelet,\n  ): number[][] {\n      const rows = cA.length;\n      const result: number[][] = [];\n\n      for (let r = 0; r < rows; r++) {\n          const row = this.idwt(cA[r], cD[r], wavelet);\n          result.push(row);\n      }\n\n      return result;\n  }\n\n  static idwtCols(\n      bands: DiscreteWavelets.WaveletBands2D,\n      wavelet: Wavelet,\n  ): { cA: number[][], cD: number[][] } {\n\n      let trimmedLL = bands.LL.map(row => [...row]);\n\n      // Undo the padding(s)\n      // !!! Assuming that the decimation factor is 2\n      if (bands.LL.length > bands.LH.length) {\n          trimmedLL.pop();\n      }\n      if (bands.LL[0].length > bands.LH[0].length) {\n          for (const row of trimmedLL) {\n              row.pop();\n          }\n      }\n\n      const cols = trimmedLL.length;\n      const rows = trimmedLL[0].length * 2;\n\n      const cA: number[][] = Array.from({ length: rows }, () => Array(cols).fill(0));\n      const cD: number[][] = Array.from({ length: rows }, () => Array(cols).fill(0));\n\n      for (let col = 0; col < cols; col++) {\n          const recA = this.idwt(trimmedLL[col]/*approx*/, bands.LH[col]/*details*/, wavelet);\n          const recD = this.idwt(bands.HL[col]/*approx*/, bands.HH[col]/*details*/, wavelet);\n\n          for (let r = 0; r < recA.length; r++) {\n              cA[r][col] = recA[r];\n              cD[r][col] = recD[r]\n          } \n      }\n\n      return { cA, cD };\n  }\n\n  static dwt2(\n      data: number[][],\n      wavelet: Wavelet,\n      mode: PaddingMode = 'symmetric',\n      taintAnalysisOnly: boolean = false,\n  ): DiscreteWavelets.WaveletBands2D {\n    console.log('dwt2 called with taintAnalysisOnly '+taintAnalysisOnly);\n      const { cA, cD } = this.dwtRows(data, wavelet, mode, taintAnalysisOnly);\n      const bands = this.dwtCols(cA, cD, wavelet, mode, taintAnalysisOnly);\n      return bands;\n  }\n\n  static wavedec2(\n      data: number[][],\n      wavelet: Wavelet,\n      mode: PaddingMode = 'symmetric',\n      level?: number,\n  ): DiscreteWavelets.WaveletCoefficients2D {\n\n      const rows = data.length;\n      const cols = data[0].length;\n\n      const maxLevels = this.maxLevel2([rows, cols], wavelet);\n      let numLevels: number;\n      if (level === undefined) {\n          numLevels = maxLevels;\n      } else {\n          if ( ! (Number.isInteger(level) && level > 0) ) {\n              throw new Error('Level parameter must be an integer greater than zero');\n          }\n          if (level > maxLevels) {\n              throw new Error('Can\\'t decompose more times than the maximum number of levels '+maxLevels);\n          }\n          numLevels = level;\n      }\n\n      let current: number[][] = data;\n      // We will use the taint analysis technique to track which coefficients are affected by original data (1) and which not(0)\n      // Coefficients that are not affected by original data must be a result of padding; they are synthetic\n      let currentMask: number[][] = Array.from({ length: data.length }, () => Array(data[0].length).fill(1));  // Creates an array with the same shape as data, but with all values as 1\n\n      const result: DiscreteWavelets.WaveletCoefficients2D = {\n          // We need to initialize approximation:data, because there is the possibility that numLevels==0 \n          approximation: data,  // Reminder: WaveletCoefficients2D['approximation'] is number[][]\n          details: [],  // Reminder: WaveletCoefficients2D['details'] variable types are an array of objects, where each object has 3 elements, and each element is a number[][]\n          size: [rows,cols],\n          mask: {\n              approximation: Array.from({ length: data.length }, () => Array(data[0].length).fill(1)),\n              details: [],\n          }\n      }\n\n      for (let level = 0; level < numLevels; level++) {\n\n          const bands: DiscreteWavelets.WaveletBands2D = this.dwt2(current, wavelet, mode);  // Perform one level of decomposition\n          const bandsMask: DiscreteWavelets.WaveletBands2D = this.dwt2(currentMask, wavelet, 'zero', true);  // We do taint analysis to detect synthetic coefficients\n\n          // We keep LL for the next iteration or as the last-level approximation\n          result.approximation = bands.LL;\n          if (result.mask)  result.mask.approximation = bandsMask.LL;\n          // We push this result to the matrix, so that details[0] will be the first-level decomposition and details[details.length-1] will be the last-level decomposition\n          result.details.push({ LH: bands.LH, HL: bands.HL, HH: bands.HH });\n          if (result.mask)  result.mask.details.push({ LH: bandsMask.LH, HL: bandsMask.HL, HH: bandsMask.HH });\n\n          current = result.approximation; // Recurse only on the LL band\n          if (result.mask)  currentMask = result.mask.approximation;\n      }\n\n      return result;\n  }\n\n  static idwt2(\n      approx: number[][],\n      detail: { LH: number[][], HL: number[][], HH: number[][] },\n      wavelet: Wavelet,\n  ): number[][] {\n      const { cA, cD } = this.idwtCols({LL: approx, LH: detail.LH, HL: detail.HL, HH:detail.HH},  wavelet);\n      let data = this.idwtRows(cA, cD, wavelet); \n      return data;\n  }\n\n  static waverec2(\n      coeffs: DiscreteWavelets.WaveletCoefficients2D,\n      wavelet: Wavelet,\n  ): number[][] {\n\n      let current: number[][] = coeffs.approximation;\n\n      for (let level = coeffs.details.length - 1; level >= 0; level--) {\n\n          current = this.idwt2(current, coeffs.details[level], wavelet);  // Perform one level of recomposition\n\n      }\n\n      // Undo the padding(s) of the last step\n      // !!! Assuming that the decimation factor is 2\n      if (current.length > coeffs.size[0]) {\n          current.pop();\n      }\n      if (current[0].length > coeffs.size[1]) {\n          for (const row of current) {\n              row.pop();\n          }\n      }\n\n      return current;\n  } \n\n\n\n\n/**\n *     1-D FUNCTIONS\n */\n\n\n  /**\n   * Single level Discrete Wavelet Transform.\n   *\n   * @param  data    Input data.\n   * @param  wavelet Wavelet to use.\n   * @param  mode    Signal extension mode.\n   * @return         Approximation and detail coefficients as result of the transform.\n   */\n  static dwt(\n    data: ReadonlyArray<number>,\n    wavelet: Readonly<Wavelet>,\n    mode: PaddingMode = DEFAULT_PADDING_MODE,\n    taintAnalysisOnly: boolean = false,\n  ): number[][] {\n    /* Determine wavelet basis and filters. */\n    const waveletBasis: Readonly<WaveletBasis> = basisFromWavelet(wavelet);\n    const filters: Readonly<Filters> = waveletBasis.dec;\n    assertValidFilters(filters);\n    const filterLength: number = filters.low.length;\n\n    /* Add padding. */\n    data = this.pad(data, padWidths(data.length, filterLength), mode);\nconsole.log('dwt CALLED ----');    \n//console.log('filters.low:');\n//console.log(filters.low);\n//console.log('filters.high:');\n//console.log(filters.high);\nconsole.log('padded data:');\nconsole.log(data);\n    /* Initialize approximation and detail coefficients. */\n    let approx: number[] = [];\n    let detail: number[] = [];\n\n    /* Calculate coefficients. */\n    for (let offset: number = 0; offset + filterLength <= data.length; offset += filterLength) {\n      /* Determine slice of values. */\n      const values: ReadonlyArray<number> = data.slice(offset, offset + filterLength);\n\nconsole.log('values:');\nconsole.log(values);\nconsole.log('intermediate [1approx, 1detail]:');\nconsole.log(dot(values, filters.low));\nconsole.log(dot(values, filters.high));\n\nconsole.log('$$');\n      if (taintAnalysisOnly) {\n        if (filterLength==2 && mode=='symmetric' && wavelet=='haar') {\n          console.log('taint analysis');\n          // Haar filters are [f1,-f1] (high-pass) and [f1,f1] (low-pass), with f1=0.7071...\n          if (values[0]==1 && values[1]==0) {\n            console.log('zero detected');\n            approx.push(1);  // Dotproduct of [a,a] with [f1,f1] depends on a\n            detail.push(0);  // Dotproduct of [a,a] with [f1,-f1] is 0\n          } else if (values[0]==0 && values[1]==0) {\n            // Dotproduct of [0,0] with [_,_] is 0\n            approx.push(0);\n            detail.push(0);\n          } else {\n            // The result of the dotproduct depents on values[0] and values[1]\n            approx.push(1);\n            detail.push(1);\n          }\n        } else {\n          // NOT IMPLEMENTED !\n          approx.push(1);\n          detail.push(1);\n        }\n      } else {\n        /* Calculate approximation coefficients. */\n        approx.push(dot(values, filters.low));\n\n        /* Calculate detail coefficients. */\n        detail.push(dot(values, filters.high));\n      }\n    }\nconsole.log('final [approx, detail]:');\nconsole.log([approx, detail]);\n\n    /* Return approximation and detail coefficients. */\n    return [approx, detail];\n  }\n\n  /**\n   * Calculates the energy as sum of squares of an array of data or\n   * coefficients.\n   *\n   * @param  values Array of data or coefficients.\n   * @return        Energy of values as the sum of squares.\n   */\n  static energy(values: ReadonlyArray<number> | ReadonlyArray<ReadonlyArray<number>>): number {\n    let energy: number = 0;\n    for (const value of values) {\n      if (typeof value === \"number\") energy += Math.pow(value, 2);\n      else energy += this.energy(value);\n    }\n    return energy;\n  }\n\n  /**\n   * Single level inverse Discrete Wavelet Transform.\n   *\n   * @param  approx  Approximation coefficients. If undefined, it will be set to an array of zeros with length equal to the detail coefficients.\n   * @param  detail  Detail coefficients. If undefined, it will be set to an array of zeros with length equal to the approximation coefficients.\n   * @param  wavelet Wavelet to use.\n   * @return         Approximation coefficients of previous level of transform.\n   */\n  static idwt(\n    approx: ReadonlyArray<number> | undefined,\n    detail: ReadonlyArray<number> | undefined,\n    wavelet: Wavelet\n  ): number[] {\n    /* Fill empty array with zeros. */\n    if (approx === undefined && detail !== undefined) {\n      approx = createArray(detail.length, 0);\n    }\n    if (detail === undefined && approx !== undefined) {\n      detail = createArray(approx.length, 0);\n    }\n\n    /* Check if some coefficients are undefined. */\n    if (approx === undefined || detail === undefined) {\n      throw new Error(\"Coefficients must not be undefined.\");\n    }\n\n    assertValidApproxDetail(approx, detail);\n\n    /* Determine wavelet basis and filters. */\n    const waveletBasis: Readonly<WaveletBasis> = basisFromWavelet(wavelet);\n    const filters: Readonly<Filters> = waveletBasis.rec;\n    assertValidFilters(filters);\n    const filterLength: number = filters.low.length;\n\n    /* Initialize transform. */\n    const coeffLength: number = approx.length;\n    let pad: ReadonlyArray<number> = createArray(filterLength + (coeffLength - 1) * 2, 0);\n\n    /* Perform inverse Discrete Wavelet Transform. */\n    for (let i = 0; i < coeffLength; i++) {\n      const offset: number = 2 * i;\n\n      /* Calculate values. */\n      let values: ReadonlyArray<number> = pad.slice(offset, offset + filterLength);\n      values = add(values, mulScalar(approx[i], filters.low));\n      values = add(values, mulScalar(detail[i], filters.high));\n\n      /* Update values. */\n      pad = pad\n        .slice(0, offset)\n        .concat(values)\n        .concat(pad.slice(offset + values.length));\n    }\n\n    /* Remove padding. */\n    return pad.slice(filterLength - 2, pad.length - (filterLength - 2));\n  }\n\n  /**\n   * Determines the maximum level of useful decomposition.\n   *\n   * @param  dataLength Length of input data.\n   * @param  wavelet    Wavelet to use.\n   * @return            Maximum useful level of decomposition.\n   */\n  static maxLevel(dataLength: number, wavelet: Readonly<Wavelet>): number {\n    /* Check for non-integer length. */\n    if (!Number.isInteger(dataLength)) {\n      throw new Error(\"Length of data is not an integer. This is not allowed.\");\n    }\n\n    /* Check for invalid input. */\n    if (dataLength < 0) {\n      throw new Error(\"Data length cannot be less than zero.\");\n    }\n\n    /* Return zero for data of zero length. */\n    if (dataLength === 0) return 0;\n\n    /* Determine wavelet basis. */\n    const waveletBasis: Readonly<WaveletBasis> = basisFromWavelet(wavelet);\n\n    /* Determine length of filter. */\n    const filterLength: number = waveletBasis.dec.low.length;\n\n    // SOURCE: https://pywavelets.readthedocs.io/en/latest/ref/dwt-discrete-wavelet-transform.html#maximum-decomposition-level-dwt-max-level-dwtn-max-level\n    return Math.max(0, Math.floor(Math.log2(dataLength / (filterLength - 1))));\n  }\n\n  /**\n   * Extends a signal with a given padding mode.\n   *\n   * @param  data      Input data.\n   * @param  padWidths Widths of padding at front and back.\n   * @param  mode      Signal extension mode.\n   * @return           Data with padding.\n   */\n  static pad(\n    data: ReadonlyArray<number>,\n    padWidths: Readonly<PaddingWidths>,\n    mode: PaddingMode\n  ): number[] {\n    /* Check for undefined data. */\n    if (!data) {\n      throw new Error(\"Cannot add padding to empty data.\");\n    }\n\n    /* Initialize. */\n    const front: number = padWidths[0];\n    const back: number = padWidths[1];\n\n    /* Add padding. */\n    return createArray(front, (index) => padElement(data, front - 1 - index, true, mode))\n      .concat(data)\n      .concat(createArray(back, (index) => padElement(data, index, false, mode)));\n  }\n\n  /**\n   * 1D wavelet decomposition. Transforms data by calculating coefficients from\n   * input data.\n   *\n   * @param  data    Input data.\n   * @param  wavelet Wavelet to use.\n   * @param  mode    Signal extension mode.\n   * @param  level   Decomposition level. Defaults to level calculated by maxLevel function.\n   * @return         Coefficients as result of the transform.\n   */\n  static wavedec(\n    data: ReadonlyArray<number>,\n    wavelet: Readonly<Wavelet>,\n    mode: PaddingMode = DEFAULT_PADDING_MODE,\n    level?: number\n  ): number[][] {\n    /* Determine decomposition level. */\n    if (level === undefined) level = this.maxLevel(data.length, wavelet);\n    if (level < 0) {\n      throw new Error(\"Decomposition level must not be less than zero\");\n    }\n\n    /*  Initialize transform. */\n    let coeffs: number[][] = [];\n    let approx: ReadonlyArray<number> = data.slice();\n\n    /* Transform. */\n    for (let l: number = 1; l <= level; l++) {\n      /* Perform single level transform. */\n      const approxDetail: ReadonlyArray<ReadonlyArray<number>> = this.dwt(approx, wavelet, mode);\n      approx = approxDetail[0];\n      const detail: ReadonlyArray<number> = approxDetail[1];\n\n      /* Prepend detail coefficients. */\n      coeffs.unshift(detail.slice());\n    }\n\n    /* Prepend last approximation. */\n    coeffs.unshift(approx.slice());\n\n    /* Return coefficients. */\n    return coeffs;\n  }\n\n  /**\n   * 1D wavelet reconstruction. Inverses a transform by calculating input data\n   * from coefficients.\n   *\n   * @param  coeffs  Coefficients as result of a transform.\n   * @param  wavelet Wavelet to use.\n   * @return         Input data as result of the inverse transform.\n   */\n  static waverec(coeffs: ReadonlyArray<ReadonlyArray<number>>, wavelet: Wavelet): number[] {\n    /* Check if coefficients are valid. */\n    assertValidCoeffs(coeffs);\n\n    /* Determine wavelet. */\n    wavelet = basisFromWavelet(wavelet);\n\n    /* Initialize transform. */\n    let approx: ReadonlyArray<number> = coeffs[0];\n\n    /* Transform. */\n    for (let i: number = 1; i < coeffs.length; i++) {\n      /* Initialize detail coefficients. */\n      const detail: ReadonlyArray<number> = coeffs[i];\n\n      // TODO: Check if problem of different coefficient lengths because of padding can be solved in a more elegant way.\n      if (approx.length === detail.length + 1) {\n        approx = approx.slice(0, approx.length - 1);\n      }\n\n      /* Calculate previous level of approximation. */\n      approx = this.idwt(approx, detail, wavelet);\n    }\n\n    /* Return data. */\n    return approx.slice();\n  }\n}\n"],"names":[],"mappings":"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"}